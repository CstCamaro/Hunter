<script>
(function(a){var b={};b.init=function(d){var f=true;try{var c=("localStorage" in window&&window["localStorage"]);if(c){localStorage.setItem("storage","");localStorage.removeItem("storage")}else{f=false}}catch(g){f=false}if(!f){try{return window.parent.postMessage("cross-storage:unavailable","*")}catch(g){return}}b._permissions=d||[];b._installListener();window.parent.postMessage("cross-storage:ready","*")};b._installListener=function(){var c=b._listener;if(window.addEventListener){window.addEventListener("message",c,false)}else{window.attachEvent("onmessage",c)}};b._listener=function(j){var e,d,h,c,i,k,g;if(j.data==="cross-storage:poll"){return window.parent.postMessage("cross-storage:ready",j.origin)}if(j.data==="cross-storage:ready"){return}h=JSON.parse(j.data);c=h.method.split("cross-storage:")[1];if(!c){return}else{if(!b._permitted(j.origin,c)){i="Invalid permissions for "+c}else{try{k=b["_"+c](h.params)}catch(f){i=f.message}}}g=JSON.stringify({id:h.id,error:i,result:k});window.parent.postMessage(g,j.origin)};b._permitted=function(c,h){var g,e,f,d;g=["get","set","del","clear","getKeys"];if(!b._inArray(h,g)){return false}for(e=0;e<b._permissions.length;e++){f=b._permissions[e];if(!(f.origin instanceof RegExp)||!(f.allow instanceof Array)){continue}d=f.origin.test(c);if(d&&b._inArray(h,f.allow)){return true}}return false};b._set=function(e){var c,d;c=e.ttl;if(c&&parseInt(c,10)!==c){throw new Error("ttl must be a number")}d={value:e.value};if(c){d.expire=b._now()+c}window.localStorage.setItem(e.key,JSON.stringify(d))};b._get=function(g){var h,c,e,f,d;h=window.localStorage;c=[];for(e=0;e<g.keys.length;e++){d=g.keys[e];f=JSON.parse(h.getItem(d));if(f===null){c.push(null)}else{if(f.expire&&f.expire<b._now()){h.removeItem(d);c.push(null)}else{c.push(f.value)}}}return(c.length>1)?c:c[0]};b._del=function(d){for(var c=0;c<d.keys.length;c++){window.localStorage.removeItem(d.keys[c])}};b._clear=function(){window.localStorage.clear()};b._getKeys=function(f){var c,e,d;d=[];e=window.localStorage.length;for(c=0;c<e;c++){d.push(window.localStorage.key(c))}return d};b._inArray=function(d,e){for(var c=0;c<e.length;c++){if(d===e[c]){return true}}return false};b._now=function(){if(typeof Date.now==="function"){return Date.now()}return new Date().getTime()};b.init([{origin:/3g\.qq\.com/,allow:["get","set","del"]}])}(this));
</script>