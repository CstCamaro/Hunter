!function(e,t){"function"==typeof define&&define.amd?define((function(){return t(e)})):t(e)}(this,(function(e){var t=function(){function t(e){return null==e?String(e):W[J.call(e)]||"object"}function n(e){return"function"==t(e)}function r(e){return null!=e&&e==e.window}function i(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function o(e){return"object"==t(e)}function a(e){return o(e)&&!r(e)&&Object.getPrototypeOf(e)==Object.prototype}function c(e){var t=!!e&&"length"in e&&e.length,n=S.type(e);return"function"!=n&&!r(e)&&("array"==n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function s(e){return e.length>0?S.fn.concat.apply([],e):e}function u(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function l(e){return e in U?U[e]:U[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function f(e,t){return"number"!=typeof t||N[u(e)]?t:t+"px"}function p(e){return"children"in e?Y.call(e.children):S.map(e.childNodes,(function(e){return 1==e.nodeType?e:void 0}))}function d(e,t){var n,r=e?e.length:0;for(n=0;r>n;n++)this[n]=e[n];this.length=r,this.selector=t||""}function g(e,t,n){for(k in t)n&&(a(t[k])||Q(t[k]))?(a(t[k])&&!a(e[k])&&(e[k]={}),Q(t[k])&&!Q(e[k])&&(e[k]=[]),g(e[k],t[k],n)):t[k]!==w&&(e[k]=t[k])}function h(e,t){return null==t?S(e):S(e).filter(t)}function m(e,t,r,i){return n(t)?t.call(e,r,i):t}function y(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function v(e,t){var n=e.className||"",r=n&&n.baseVal!==w;return t===w?r?n.baseVal:n:void(r?n.baseVal=t:e.className=t)}function _(e){try{return e?"true"==e||"false"!=e&&("null"==e?null:+e+""==e?+e:/^[\[\{]/.test(e)?S.parseJSON(e):e):e}catch(t){return e}}function b(e,t){t(e);for(var n=0,r=e.childNodes.length;r>n;n++)b(e.childNodes[n],t)}var w,k,S,x,T,j,O=[],G=O.concat,C=O.filter,Y=O.slice,I=e.document,P={},U={},N={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},E=/^\s*<(\w+|!)[^>]*>/,M=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,R=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,q=/^(?:body|html)$/i,A=/([A-Z])/g,$=["val","css","html","text","data","width","height","offset"],D=I.createElement("table"),F=I.createElement("tr"),L={tr:I.createElement("tbody"),tbody:D,thead:D,tfoot:D,td:F,th:F,"*":I.createElement("div")},B=/complete|loaded|interactive/,z=/^[\w-]*$/,W={},J=W.toString,H={},K=I.createElement("div"),Z={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},Q=Array.isArray||function(e){return e instanceof Array};return H.matches=function(e,t){if(!t||!e||1!==e.nodeType)return!1;var n=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var r,i=e.parentNode,o=!i;return o&&(i=K).appendChild(e),r=~H.qsa(i,t).indexOf(e),o&&K.removeChild(e),r},T=function(e){return e.replace(/-+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))},j=function(e){return C.call(e,(function(t,n){return e.indexOf(t)==n}))},H.fragment=function(e,t,n){var r,i,o;return M.test(e)&&(r=S(I.createElement(RegExp.$1))),r||(e.replace&&(e=e.replace(R,"<$1></$2>")),t===w&&(t=E.test(e)&&RegExp.$1),t in L||(t="*"),(o=L[t]).innerHTML=""+e,r=S.each(Y.call(o.childNodes),(function(){o.removeChild(this)}))),a(n)&&(i=S(r),S.each(n,(function(e,t){$.indexOf(e)>-1?i[e](t):i.attr(e,t)}))),r},H.Z=function(e,t){return new d(e,t)},H.isZ=function(e){return e instanceof H.Z},H.init=function(e,t){var r;if(!e)return H.Z();if("string"==typeof e)if("<"==(e=e.trim())[0]&&E.test(e))r=H.fragment(e,RegExp.$1,t),e=null;else{if(t!==w)return S(t).find(e);r=H.qsa(I,e)}else{if(n(e))return S(I).ready(e);if(H.isZ(e))return e;if(Q(e))r=function(e){return C.call(e,(function(e){return null!=e}))}(e);else if(o(e))r=[e],e=null;else if(E.test(e))r=H.fragment(e.trim(),RegExp.$1,t),e=null;else{if(t!==w)return S(t).find(e);r=H.qsa(I,e)}}return H.Z(r,e)},(S=function(e,t){return H.init(e,t)}).extend=function(e){var t,n=Y.call(arguments,1);return"boolean"==typeof e&&(t=e,e=n.shift()),n.forEach((function(n){g(e,n,t)})),e},H.qsa=function(e,t){var n,r="#"==t[0],i=!r&&"."==t[0],o=r||i?t.slice(1):t,a=z.test(o);return e.getElementById&&a&&r?(n=e.getElementById(o))?[n]:[]:1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType?[]:Y.call(a&&!r&&e.getElementsByClassName?i?e.getElementsByClassName(o):e.getElementsByTagName(t):e.querySelectorAll(t))},S.contains=I.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){for(;t&&(t=t.parentNode);)if(t===e)return!0;return!1},S.type=t,S.isFunction=n,S.isWindow=r,S.isArray=Q,S.isPlainObject=a,S.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},S.isNumeric=function(e){var t=Number(e),n=typeof e;return null!=e&&"boolean"!=n&&("string"!=n||e.length)&&!isNaN(t)&&isFinite(t)||!1},S.inArray=function(e,t,n){return O.indexOf.call(t,e,n)},S.camelCase=T,S.trim=function(e){return null==e?"":String.prototype.trim.call(e)},S.uuid=0,S.support={},S.expr={},S.noop=function(){},S.map=function(e,t){var n,r,i,o=[];if(c(e))for(r=0;r<e.length;r++)null!=(n=t(e[r],r))&&o.push(n);else for(i in e)null!=(n=t(e[i],i))&&o.push(n);return s(o)},S.each=function(e,t){var n,r;if(c(e)){for(n=0;n<e.length;n++)if(!1===t.call(e[n],n,e[n]))return e}else for(r in e)if(!1===t.call(e[r],r,e[r]))return e;return e},S.grep=function(e,t){return C.call(e,t)},e.JSON&&(S.parseJSON=JSON.parse),S.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),(function(e,t){W["[object "+t+"]"]=t.toLowerCase()})),S.fn={constructor:H.Z,length:0,forEach:O.forEach,reduce:O.reduce,push:O.push,sort:O.sort,splice:O.splice,indexOf:O.indexOf,concat:function(){var e,t,n=[];for(e=0;e<arguments.length;e++)t=arguments[e],n[e]=H.isZ(t)?t.toArray():t;return G.apply(H.isZ(this)?this.toArray():this,n)},map:function(e){return S(S.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return S(Y.apply(this,arguments))},ready:function(e){return B.test(I.readyState)&&I.body?e(S):I.addEventListener("DOMContentLoaded",(function(){e(S)}),!1),this},get:function(e){return e===w?Y.call(this):this[e>=0?e:e+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each((function(){null!=this.parentNode&&this.parentNode.removeChild(this)}))},each:function(e){return O.every.call(this,(function(t,n){return!1!==e.call(t,n,t)})),this},filter:function(e){return n(e)?this.not(this.not(e)):S(C.call(this,(function(t){return H.matches(t,e)})))},add:function(e,t){return S(j(this.concat(S(e,t))))},is:function(e){return this.length>0&&H.matches(this[0],e)},not:function(e){var t=[];if(n(e)&&e.call!==w)this.each((function(n){e.call(this,n)||t.push(this)}));else{var r="string"==typeof e?this.filter(e):c(e)&&n(e.item)?Y.call(e):S(e);this.forEach((function(e){r.indexOf(e)<0&&t.push(e)}))}return S(t)},has:function(e){return this.filter((function(){return o(e)?S.contains(this,e):S(this).find(e).size()}))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!o(e)?e:S(e)},last:function(){var e=this[this.length-1];return e&&!o(e)?e:S(e)},find:function(e){var t=this;return e?"object"==typeof e?S(e).filter((function(){var e=this;return O.some.call(t,(function(t){return S.contains(t,e)}))})):1==this.length?S(H.qsa(this[0],e)):this.map((function(){return H.qsa(this,e)})):S()},closest:function(e,t){var n=[],r="object"==typeof e&&S(e);return this.each((function(o,a){for(;a&&!(r?r.indexOf(a)>=0:H.matches(a,e));)a=a!==t&&!i(a)&&a.parentNode;a&&n.indexOf(a)<0&&n.push(a)})),S(n)},parents:function(e){for(var t=[],n=this;n.length>0;)n=S.map(n,(function(e){return(e=e.parentNode)&&!i(e)&&t.indexOf(e)<0?(t.push(e),e):void 0}));return h(t,e)},parent:function(e){return h(j(this.pluck("parentNode")),e)},children:function(e){return h(this.map((function(){return p(this)})),e)},contents:function(){return this.map((function(){return this.contentDocument||Y.call(this.childNodes)}))},siblings:function(e){return h(this.map((function(e,t){return C.call(p(t.parentNode),(function(e){return e!==t}))})),e)},empty:function(){return this.each((function(){this.innerHTML=""}))},pluck:function(e){return S.map(this,(function(t){return t[e]}))},show:function(){return this.each((function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=function(e){var t,n;return P[e]||(t=I.createElement(e),I.body.appendChild(t),n=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==n&&(n="block"),P[e]=n),P[e]}(this.nodeName))}))},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var t=n(e);if(this[0]&&!t)var r=S(e).get(0),i=r.parentNode||this.length>1;return this.each((function(n){S(this).wrapAll(t?e.call(this,n):i?r.cloneNode(!0):r)}))},wrapAll:function(e){if(this[0]){S(this[0]).before(e=S(e));for(var t;(t=e.children()).length;)e=t.first();S(e).append(this)}return this},wrapInner:function(e){var t=n(e);return this.each((function(n){var r=S(this),i=r.contents(),o=t?e.call(this,n):e;i.length?i.wrapAll(o):r.append(o)}))},unwrap:function(){return this.parent().each((function(){S(this).replaceWith(S(this).children())})),this},clone:function(){return this.map((function(){return this.cloneNode(!0)}))},hide:function(){return this.css("display","none")},toggle:function(e){return this.each((function(){var t=S(this);(e===w?"none"==t.css("display"):e)?t.show():t.hide()}))},prev:function(e){return S(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return S(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return 0 in arguments?this.each((function(t){var n=this.innerHTML;S(this).empty().append(m(this,e,t,n))})):0 in this?this[0].innerHTML:null},text:function(e){return 0 in arguments?this.each((function(t){var n=m(this,e,t,this.textContent);this.textContent=null==n?"":""+n})):0 in this?this.pluck("textContent").join(""):null},attr:function(e,t){var n;return"string"!=typeof e||1 in arguments?this.each((function(n){if(1===this.nodeType)if(o(e))for(k in e)y(this,k,e[k]);else y(this,e,m(this,t,n,this.getAttribute(e)))})):0 in this&&1==this[0].nodeType&&null!=(n=this[0].getAttribute(e))?n:w},removeAttr:function(e){return this.each((function(){1===this.nodeType&&e.split(" ").forEach((function(e){y(this,e)}),this)}))},prop:function(e,t){return e=Z[e]||e,1 in arguments?this.each((function(n){this[e]=m(this,t,n,this[e])})):this[0]&&this[0][e]},removeProp:function(e){return e=Z[e]||e,this.each((function(){delete this[e]}))},data:function(e,t){var n="data-"+e.replace(A,"-$1").toLowerCase(),r=1 in arguments?this.attr(n,t):this.attr(n);return null!==r?_(r):w},val:function(e){return 0 in arguments?(null==e&&(e=""),this.each((function(t){this.value=m(this,e,t,this.value)}))):this[0]&&(this[0].multiple?S(this[0]).find("option").filter((function(){return this.selected})).pluck("value"):this[0].value)},offset:function(t){if(t)return this.each((function(e){var n=S(this),r=m(this,t,e,n.offset()),i=n.offsetParent().offset(),o={top:r.top-i.top,left:r.left-i.left};"static"==n.css("position")&&(o.position="relative"),n.css(o)}));if(!this.length)return null;if(I.documentElement!==this[0]&&!S.contains(I.documentElement,this[0]))return{top:0,left:0};var n=this[0].getBoundingClientRect();return{left:n.left+e.pageXOffset,top:n.top+e.pageYOffset,width:Math.round(n.width),height:Math.round(n.height)}},css:function(e,n){if(arguments.length<2){var r=this[0];if("string"==typeof e){if(!r)return;return r.style[T(e)]||getComputedStyle(r,"").getPropertyValue(e)}if(Q(e)){if(!r)return;var i={},o=getComputedStyle(r,"");return S.each(e,(function(e,t){i[t]=r.style[T(t)]||o.getPropertyValue(t)})),i}}var a="";if("string"==t(e))n||0===n?a=u(e)+":"+f(e,n):this.each((function(){this.style.removeProperty(u(e))}));else for(k in e)e[k]||0===e[k]?a+=u(k)+":"+f(k,e[k])+";":this.each((function(){this.style.removeProperty(u(k))}));return this.each((function(){this.style.cssText+=";"+a}))},index:function(e){return e?this.indexOf(S(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return!!e&&O.some.call(this,(function(e){return this.test(v(e))}),l(e))},addClass:function(e){return e?this.each((function(t){if("className"in this){x=[];var n=v(this);m(this,e,t,n).split(/\s+/g).forEach((function(e){S(this).hasClass(e)||x.push(e)}),this),x.length&&v(this,n+(n?" ":"")+x.join(" "))}})):this},removeClass:function(e){return this.each((function(t){if("className"in this){if(e===w)return v(this,"");x=v(this),m(this,e,t,x).split(/\s+/g).forEach((function(e){x=x.replace(l(e)," ")})),v(this,x.trim())}}))},toggleClass:function(e,t){return e?this.each((function(n){var r=S(this);m(this,e,n,v(this)).split(/\s+/g).forEach((function(e){(t===w?!r.hasClass(e):t)?r.addClass(e):r.removeClass(e)}))})):this},scrollTop:function(e){if(this.length){var t="scrollTop"in this[0];return e===w?t?this[0].scrollTop:this[0].pageYOffset:this.each(t?function(){this.scrollTop=e}:function(){this.scrollTo(this.scrollX,e)})}},scrollLeft:function(e){if(this.length){var t="scrollLeft"in this[0];return e===w?t?this[0].scrollLeft:this[0].pageXOffset:this.each(t?function(){this.scrollLeft=e}:function(){this.scrollTo(e,this.scrollY)})}},position:function(){if(this.length){var e=this[0],t=this.offsetParent(),n=this.offset(),r=q.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(S(e).css("margin-top"))||0,n.left-=parseFloat(S(e).css("margin-left"))||0,r.top+=parseFloat(S(t[0]).css("border-top-width"))||0,r.left+=parseFloat(S(t[0]).css("border-left-width"))||0,{top:n.top-r.top,left:n.left-r.left}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent||I.body;e&&!q.test(e.nodeName)&&"static"==S(e).css("position");)e=e.offsetParent;return e}))}},S.fn.detach=S.fn.remove,["width","height"].forEach((function(e){var t=e.replace(/./,(function(e){return e[0].toUpperCase()}));S.fn[e]=function(n){var o,a=this[0];return n===w?r(a)?a["inner"+t]:i(a)?a.documentElement["scroll"+t]:(o=this.offset())&&o[e]:this.each((function(t){(a=S(this)).css(e,m(this,n,t,a[e]()))}))}})),["after","prepend","before","append"].forEach((function(n,r){var i=r%2;S.fn[n]=function(){var n,o,a=S.map(arguments,(function(e){var r=[];return"array"==(n=t(e))?(e.forEach((function(e){return e.nodeType!==w?r.push(e):S.zepto.isZ(e)?r=r.concat(e.get()):void(r=r.concat(H.fragment(e)))})),r):"object"==n||null==e?e:H.fragment(e)})),c=this.length>1;return a.length<1?this:this.each((function(t,n){o=i?n:n.parentNode,n=0==r?n.nextSibling:1==r?n.firstChild:2==r?n:null;var s=S.contains(I.documentElement,o);a.forEach((function(t){if(c)t=t.cloneNode(!0);else if(!o)return S(t).remove();o.insertBefore(t,n),s&&b(t,(function(t){if(!(null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src)){var n=t.ownerDocument?t.ownerDocument.defaultView:e;n.eval.call(n,t.innerHTML)}}))}))}))},S.fn[i?n+"To":"insert"+(r?"Before":"After")]=function(e){return S(e)[n](this),this}})),H.Z.prototype=d.prototype=S.fn,H.uniq=j,H.deserializeValue=_,S.zepto=H,S}();return e.Zepto=t,void 0===e.$&&(e.$=t),function(t){function n(e){return e._zid||(e._zid=p++)}function r(e,t,r,o){if((t=i(t)).ns)var a=function(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}(t.ns);return(m[n(e)]||[]).filter((function(e){return e&&(!t.e||e.e==t.e)&&(!t.ns||a.test(e.ns))&&(!r||n(e.fn)===n(r))&&(!o||e.sel==o)}))}function i(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function o(e,t){return e.del&&!v&&e.e in _||!!t}function a(e){return b[e]||v&&_[e]||e}function c(e,r,c,s,l,p,d){var g=n(e),h=m[g]||(m[g]=[]);r.split(/\s/).forEach((function(n){if("ready"==n)return t(document).ready(c);var r=i(n);r.fn=c,r.sel=l,r.e in b&&(c=function(e){var n=e.relatedTarget;return!n||n!==this&&!t.contains(this,n)?r.fn.apply(this,arguments):void 0}),r.del=p;var g=p||c;r.proxy=function(t){if(!(t=u(t)).isImmediatePropagationStopped()){t.data=s;var n=g.apply(e,t._args==f?[t]:[t].concat(t._args));return!1===n&&(t.preventDefault(),t.stopPropagation()),n}},r.i=h.length,h.push(r),"addEventListener"in e&&e.addEventListener(a(r.e),r.proxy,o(r,d))}))}function s(e,t,i,c,s){var u=n(e);(t||"").split(/\s/).forEach((function(t){r(e,t,i,c).forEach((function(t){delete m[u][t.i],"removeEventListener"in e&&e.removeEventListener(a(t.e),t.proxy,o(t,s))}))}))}function u(e,n){return(n||!e.isDefaultPrevented)&&(n||(n=e),t.each(x,(function(t,r){var i=n[t];e[t]=function(){return this[r]=w,i&&i.apply(n,arguments)},e[r]=k})),e.timeStamp||(e.timeStamp=Date.now()),(n.defaultPrevented!==f?n.defaultPrevented:"returnValue"in n?!1===n.returnValue:n.getPreventDefault&&n.getPreventDefault())&&(e.isDefaultPrevented=w)),e}function l(e){var t,n={originalEvent:e};for(t in e)S.test(t)||e[t]===f||(n[t]=e[t]);return u(n,e)}var f,p=1,d=Array.prototype.slice,g=t.isFunction,h=function(e){return"string"==typeof e},m={},y={},v="onfocusin"in e,_={focus:"focusin",blur:"focusout"},b={mouseenter:"mouseover",mouseleave:"mouseout"};y.click=y.mousedown=y.mouseup=y.mousemove="MouseEvents",t.event={add:c,remove:s},t.proxy=function(e,r){var i=2 in arguments&&d.call(arguments,2);if(g(e)){var o=function(){return e.apply(r,i?i.concat(d.call(arguments)):arguments)};return o._zid=n(e),o}if(h(r))return i?(i.unshift(e[r],e),t.proxy.apply(null,i)):t.proxy(e[r],e);throw new TypeError("expected function")},t.fn.bind=function(e,t,n){return this.on(e,t,n)},t.fn.unbind=function(e,t){return this.off(e,t)},t.fn.one=function(e,t,n,r){return this.on(e,t,n,r,1)};var w=function(){return!0},k=function(){return!1},S=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,x={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};t.fn.delegate=function(e,t,n){return this.on(t,e,n)},t.fn.undelegate=function(e,t,n){return this.off(t,e,n)},t.fn.live=function(e,n){return t(document.body).delegate(this.selector,e,n),this},t.fn.die=function(e,n){return t(document.body).undelegate(this.selector,e,n),this},t.fn.on=function(e,n,r,i,o){var a,u,p=this;return e&&!h(e)?(t.each(e,(function(e,t){p.on(e,n,r,t,o)})),p):(h(n)||g(i)||!1===i||(i=r,r=n,n=f),(i===f||!1===r)&&(i=r,r=f),!1===i&&(i=k),p.each((function(f,p){o&&(a=function(e){return s(p,e.type,i),i.apply(this,arguments)}),n&&(u=function(e){var r,o=t(e.target).closest(n,p).get(0);return o&&o!==p?(r=t.extend(l(e),{currentTarget:o,liveFired:p}),(a||i).apply(o,[r].concat(d.call(arguments,1)))):void 0}),c(p,e,i,r,n,u||a)})))},t.fn.off=function(e,n,r){var i=this;return e&&!h(e)?(t.each(e,(function(e,t){i.off(e,n,t)})),i):(h(n)||g(r)||!1===r||(r=n,n=f),!1===r&&(r=k),i.each((function(){s(this,e,r,n)})))},t.fn.trigger=function(e,n){return(e=h(e)||t.isPlainObject(e)?t.Event(e):u(e))._args=n,this.each((function(){e.type in _&&"function"==typeof this[e.type]?this[e.type]():"dispatchEvent"in this?this.dispatchEvent(e):t(this).triggerHandler(e,n)}))},t.fn.triggerHandler=function(e,n){var i,o;return this.each((function(a,c){(i=l(h(e)?t.Event(e):e))._args=n,i.target=c,t.each(r(c,e.type||e),(function(e,t){return o=t.proxy(i),!i.isImmediatePropagationStopped()&&void 0}))})),o},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach((function(e){t.fn[e]=function(t){return 0 in arguments?this.bind(e,t):this.trigger(e)}})),t.Event=function(e,t){h(e)||(e=(t=e).type);var n=document.createEvent(y[e]||"Events"),r=!0;if(t)for(var i in t)"bubbles"==i?r=!!t[i]:n[i]=t[i];return n.initEvent(e,r,!0),u(n)}}(t),function(t){function n(e,n,r){var i=t.Event(n);return t(e).trigger(i,r),!i.isDefaultPrevented()}function r(e,t,r,i){return e.global?n(t||y,r,i):void 0}function i(e){e.global&&0==t.active++&&r(e,null,"ajaxStart")}function o(e){e.global&&!--t.active&&r(e,null,"ajaxStop")}function a(e,t){var n=t.context;return!1!==t.beforeSend.call(n,e,t)&&!1!==r(t,n,"ajaxBeforeSend",[e,t])&&void r(t,n,"ajaxSend",[e,t])}function c(e,t,n,i){var o=n.context,a="success";n.success.call(o,e,a,t),i&&i.resolveWith(o,[e,a,t]),r(n,o,"ajaxSuccess",[t,n,e]),u(a,t,n)}function s(e,t,n,i,o){var a=i.context;i.error.call(a,n,t,e),o&&o.rejectWith(a,[n,t,e]),r(i,a,"ajaxError",[n,i,e||t]),u(t,n,i)}function u(e,t,n){var i=n.context;n.complete.call(i,t,e),r(n,i,"ajaxComplete",[t,n]),o(n)}function l(){}function f(e){return e&&(e=e.split(";",2)[0]),e&&(e==k?"html":e==w?"json":_.test(e)?"script":b.test(e)&&"xml")||"text"}function p(e,t){return""==t?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function d(e,n,r,i){return t.isFunction(n)&&(i=r,r=n,n=void 0),t.isFunction(r)||(i=r,r=void 0),{url:e,data:n,success:r,dataType:i}}var g,h,m=+new Date,y=e.document,v=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,_=/^(?:text|application)\/javascript/i,b=/^(?:text|application)\/xml/i,w="application/json",k="text/html",S=/^\s*$/,x=y.createElement("a");x.href=e.location.href,t.active=0,t.ajaxJSONP=function(n,r){if(!("type"in n))return t.ajax(n);var i,o,u=n.jsonpCallback,l=(t.isFunction(u)?u():u)||"Zepto"+m++,f=y.createElement("script"),p=e[l],d=function(e){t(f).triggerHandler("error",e||"abort")},g={abort:d};return r&&r.promise(g),t(f).on("load error",(function(a,u){clearTimeout(o),t(f).off().remove(),"error"!=a.type&&i?c(i[0],g,n,r):s(null,u||"error",g,n,r),e[l]=p,i&&t.isFunction(p)&&p(i[0]),p=i=void 0})),!1===a(g,n)?(d("abort"),g):(e[l]=function(){i=arguments},f.src=n.url.replace(/\?(.+)=\?/,"?$1="+l),y.head.appendChild(f),n.timeout>0&&(o=setTimeout((function(){d("timeout")}),n.timeout)),g)},t.ajaxSettings={type:"GET",beforeSend:l,success:l,error:l,complete:l,context:null,global:!0,xhr:function(){return new e.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:w,xml:"application/xml, text/xml",html:k,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0,dataFilter:l},t.ajax=function(n){var r,o,u=t.extend({},n||{}),d=t.Deferred&&t.Deferred();for(g in t.ajaxSettings)void 0===u[g]&&(u[g]=t.ajaxSettings[g]);i(u),u.crossDomain||((r=y.createElement("a")).href=u.url,r.href=r.href,u.crossDomain=x.protocol+"//"+x.host!=r.protocol+"//"+r.host),u.url||(u.url=e.location.toString()),(o=u.url.indexOf("#"))>-1&&(u.url=u.url.slice(0,o)),function(e){e.processData&&e.data&&"string"!=t.type(e.data)&&(e.data=t.param(e.data,e.traditional)),!e.data||e.type&&"GET"!=e.type.toUpperCase()&&"jsonp"!=e.dataType||(e.url=p(e.url,e.data),e.data=void 0)}(u);var m=u.dataType,v=/\?.+=\?/.test(u.url);if(v&&(m="jsonp"),!1!==u.cache&&(n&&!0===n.cache||"script"!=m&&"jsonp"!=m)||(u.url=p(u.url,"_="+Date.now())),"jsonp"==m)return v||(u.url=p(u.url,u.jsonp?u.jsonp+"=?":!1===u.jsonp?"":"callback=?")),t.ajaxJSONP(u,d);var _,b=u.accepts[m],w={},k=function(e,t){w[e.toLowerCase()]=[e,t]},T=/^([\w-]+:)\/\//.test(u.url)?RegExp.$1:e.location.protocol,j=u.xhr(),O=j.setRequestHeader;if(d&&d.promise(j),u.crossDomain||k("X-Requested-With","XMLHttpRequest"),k("Accept",b||"*/*"),(b=u.mimeType||b)&&(b.indexOf(",")>-1&&(b=b.split(",",2)[0]),j.overrideMimeType&&j.overrideMimeType(b)),(u.contentType||!1!==u.contentType&&u.data&&"GET"!=u.type.toUpperCase())&&k("Content-Type",u.contentType||"application/x-www-form-urlencoded"),u.headers)for(h in u.headers)k(h,u.headers[h]);if(j.setRequestHeader=k,j.onreadystatechange=function(){if(4==j.readyState){j.onreadystatechange=l,clearTimeout(_);var e,n=!1;if(j.status>=200&&j.status<300||304==j.status||0==j.status&&"file:"==T){if(m=m||f(u.mimeType||j.getResponseHeader("content-type")),"arraybuffer"==j.responseType||"blob"==j.responseType)e=j.response;else{e=j.responseText;try{e=function(e,t,n){if(n.dataFilter==l)return e;var r=n.context;return n.dataFilter.call(r,e,t)}(e,m,u),"script"==m?(0,eval)(e):"xml"==m?e=j.responseXML:"json"==m&&(e=S.test(e)?null:t.parseJSON(e))}catch(e){n=e}if(n)return s(n,"parsererror",j,u,d)}c(e,j,u,d)}else s(j.statusText||null,j.status?"error":"abort",j,u,d)}},!1===a(j,u))return j.abort(),s(null,"abort",j,u,d),j;var G=!("async"in u)||u.async;if(j.open(u.type,u.url,G,u.username,u.password),u.xhrFields)for(h in u.xhrFields)j[h]=u.xhrFields[h];for(h in w)O.apply(j,w[h]);return u.timeout>0&&(_=setTimeout((function(){j.onreadystatechange=l,j.abort(),s(null,"timeout",j,u,d)}),u.timeout)),j.send(u.data?u.data:null),j},t.get=function(){return t.ajax(d.apply(null,arguments))},t.post=function(){var e=d.apply(null,arguments);return e.type="POST",t.ajax(e)},t.getJSON=function(){var e=d.apply(null,arguments);return e.dataType="json",t.ajax(e)},t.fn.load=function(e,n,r){if(!this.length)return this;var i,o=this,a=e.split(/\s/),c=d(e,n,r),s=c.success;return a.length>1&&(c.url=a[0],i=a[1]),c.success=function(e){o.html(i?t("<div>").html(e.replace(v,"")).find(i):e),s&&s.apply(o,arguments)},t.ajax(c),this};var T=encodeURIComponent;t.param=function(e,n){var r=[];return r.add=function(e,n){t.isFunction(n)&&(n=n()),null==n&&(n=""),this.push(T(e)+"="+T(n))},function e(n,r,i,o){var a,c=t.isArray(r),s=t.isPlainObject(r);t.each(r,(function(r,u){a=t.type(u),o&&(r=i?o:o+"["+(s||"object"==a||"array"==a?r:"")+"]"),!o&&c?n.add(u.name,u.value):"array"==a||!i&&"object"==a?e(n,u,i,r):n.add(r,u)}))}(r,e,n),r.join("&").replace(/%20/g,"+")}}(t),function(e){e.fn.serializeArray=function(){var t,n,r=[],i=function(e){return e.forEach?e.forEach(i):void r.push({name:t,value:e})};return this[0]&&e.each(this[0].elements,(function(r,o){n=o.type,(t=o.name)&&"fieldset"!=o.nodeName.toLowerCase()&&!o.disabled&&"submit"!=n&&"reset"!=n&&"button"!=n&&"file"!=n&&("radio"!=n&&"checkbox"!=n||o.checked)&&i(e(o).val())})),r},e.fn.serialize=function(){var e=[];return this.serializeArray().forEach((function(t){e.push(encodeURIComponent(t.name)+"="+encodeURIComponent(t.value))})),e.join("&")},e.fn.submit=function(t){if(0 in arguments)this.bind("submit",t);else if(this.length){var n=e.Event("submit");this.eq(0).trigger(n),n.isDefaultPrevented()||this.get(0).submit()}return this}}(t),function(){try{getComputedStyle(void 0)}catch(n){var t=getComputedStyle;e.getComputedStyle=function(e,n){try{return t(e,n)}catch(e){return null}}}}(),t}));var GY=function(e,t){function n(e){return!function(e){return r(e)||function(e){return t&&t.isNumeric?t.isNumeric(e):!isNaN(e)&&e-0==e}(e)||function(e){return null==e}(e)||"boolean"==typeof e||"number"==typeof e&&isNaN(e)||null==e}(e)&&!o(e)&&"object"==typeof e}function r(e){return"string"==typeof e}function i(e){return t&&"function"==typeof t.isFunction?t.isFunction(e):"function"==typeof e||e instanceof Function}function o(e){return t&&t.isArray?t.isArray(e):"array"==typeof e||e instanceof Array}e.Protocol="https:"==document.location.protocol?"https://":"http://",e.require||(e.require=function(e){return GY[e]||null});return{extend:function(e,n){if(r(e)){if(-1!=e.indexOf(".")){var o,a,c=e.split(".");c.length;for(var s in c)0==s?(o=c[s],GY[o]||(GY[o]={})):(a=c[s],GY[o][a]?t.extend(GY[o][a],n):GY[o][a]=n)}else GY[e]?t.extend(GY[e],n):GY[e]=n;n.__init&&i(n.__init)&&n.__init()}},rateControll:function(e,t){return e._h=0,function(){var n=arguments;e._h&&(clearTimeout(e._h),e._h=0),e._h=setTimeout((function(){e.apply(null,n),e._h=0}),1e3*t)}},is_fun:i,is_arr:o,is_obj:n,forEach:function(e,t){if(function(e){return!e||(!(!o(e)||e.length)||(n(e)?!_get_obj_keys(e).length:!e))}(e)||!i(t))throw new Error("Empty object!");if(o(e)){var r=!1;e.forEach&&e.forEach((function(n,i){r||t(n,i,e)!={}||(r=!0)}))}else if(n(e))for(var a in e)if(t(e[a],a,e)=={})break}}}(window,window.Zepto||window.jQuery);function randomTask(e){if((e=e||[])&&e.length)for(var t=Math.random(),n=0,r=0;r<e.length;r++){var i=e[r].chance,o=e[r].callback,a=Math.min(1,Math.max(0,i))||0;if(t<(n=Math.min(1,n+a)))return void("function"==typeof o&&o())}}function tryGetStorage(e){try{return JSON.parse(localStorage.getItem(e))}catch(e){}}function trySetStorage(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(e){}}function getTestCase(e,t){t||(t={onSuccess:function(){},onError:function(){}});var n=t.onSuccess;t.onError;if(!e)throw new Error("缺少`options`");var r=e.cache,i=e.start,o=e.end,a=e.ts,c=e.versions;if(!c||!c.length)return console.warn("abtest json 配置异常，缺少`versions`"),void("function"==typeof n&&n());var s=new Date;if(i&&s<new Date(i)||o&&s>new Date(o))return console.warn("当前不在 abtest 生效时间内"),void("function"==typeof n&&n());var u=`_abtest_${location.pathname}`,l=tryGetStorage(u);r&&l&&l.ts==a?"function"==typeof n&&n({id:l.id}):randomTask(c.map((function(e){return{chance:e.chance,callback:function(){trySetStorage(u,{ts:a,id:e.id}),"function"==typeof n&&n({id:e.id})}}})))}!function(e){function t(e){return(e=(e||"")+"")&&(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),e}function n(e){e=e||"";var t=arguments,n=t.length;return e=e.replace(/\{(\d+)\}/g,(function(e,r){return r-=0,isNaN(r)||r<=0||r>n?e:t[r]}))}function r(e,t){for(var n=0,r=0;r<t;)r+=o(e,n),n++;return r>t+.1?n-1:n}function i(e,t,n){var r,i=0;for(r=t;r<e.length&&!((i+=o(e,r))>n);++r);return r}function o(e,t){return e.charCodeAt(t)>127||94==e.charCodeAt(t)?1:.5}!String.prototype.htmlSafe&&(String.prototype.htmlSafe=function(){return t(this)}),!String.prototype.format&&(String.prototype.format=function(){var e=Array.prototype.slice.call(arguments,0,arguments.length);return e.unshift(this),n.apply(null,e)}),GY.extend("Util.string",{toObj:function(e,t){var n,r,i,o={};i=(n=(e=e.replace(/\?/g,"&")).split("&")).length;for(var a=0;a<i;++a)n[a].indexOf("=")<0||(o[(r=n[a].split("="))[0]]=t?decodeURIComponent(r[1]):r[1]);return o},toSafe:function(e,n){return n?t(e):e.replace(/&amp;/g,"").replace(/&gt;/,"").replace(/&lt;/g,"").replace(/quot;/g,"").replace(/#39;/g,"").replace(/&/g,"").replace(/>/g,"").replace(/</g,"").replace(/"/g,"").replace(/'/g,"").replace(/%3C/g,"").replace(/%3c/g,"").replace(/%3E/g,"").replace(/%3e/g,"").replace(/%+\/v8/g,"")},htmlSafe:t,format:n,getCStrLen:function(e){for(var t=0,n=0;n<e.length;++n)t+=e.charCodeAt(n)>127||94==e.charCodeAt(n)?2:1;return t},getSubCStr:function(e,t,n){var o=r(e,t);return n?e.substr(o,i(e,o,n)-o+1):e.substr(o)},getSubCString:function(e,t,n){var o=r(e,t);return n?e.substring(o,i(e,o,n-t)):e.substring(o)}})}(),function(e){function t(e,t,n){switch(n){case"+":return r(e,t);case"-":return function(e,t){return r(e,-t)}(e,t);case"*":return function(e,t){return i(e)*i(t)/(o(e)*o(t))}(e,t);case"/":return function(e,t){return i(e)/i(t)*(o(t)/o(e))}(e,t)}function r(e,t){var n=Math.max(o(e),o(t));return(e*n+t*n)/n==e+t?e+t:Math.round(e*n+t*n)/n}function i(e){return Number(e.toString().replace(".",""))}function o(e){var t=(""+e).split(".")[1];return Math.pow(10,t?t.length:0)}}GY.extend("Util.number",{format:function(e){var t=parseInt(e).toString(),n=t.length;if(n<=3)return t;var r=n%3;return r>0?t.slice(0,r)+","+t.slice(r,n).match(/\d{3}/g).join(","):t.slice(r,n).match(/\d{3}/g).join(",")},safeMath:t,safeToFixed:function(e,n){var r=Math.pow(10,n),i=""+parseInt(t(e,r,"*")+.5)/r,o=i.split(".")[1];return o?o.length<n?i.concat("0"):i:0==n?i:i.concat(".",new Array(n+1).join("0"))},toChiness:function(e){if(e=parseFloat(e),isNaN(e))return console.error("TypeError in Number to Chiness."),!1;if(e>99999.99)return console.error("RangeError in Number to Chiness."),!1;var t,n,r=String(e),i=r.indexOf(".");i>-1?(t=r.slice(0,i),n=r.slice(i+1)):(t=r,n="");for(var o=["","十","百","千","万"],a=["零","一","二","三","四","五","六","七","八","九"],c="",s=0;s<t.length;++s)parseInt(t[s])?c+=a[parseInt(t[s])]+o[t.length-s-1]:c+="零";n&&(c+="点",c+=a[parseInt(n[0])],c+=n[1]?a[parseInt(n[1])]:"");var u=encodeURIComponent("点"),l=encodeURIComponent("零"),f=new RegExp("(("+l+")+)","g"),p=new RegExp("(?!"+u+")"+l+"$"),d=encodeURIComponent(c).replace(f,l).replace(encodeURIComponent("零点"),u).replace(p,"");return 0==d.indexOf(u)&&(d=l+d),decodeURIComponent(d)}})}(),function(e){function t(){var e,o,a,c,s,u,l=!1,f=arguments[0]||{},p=arguments.length;"object"!=typeof f&&(f={}),"boolean"==typeof arguments[p-1]&&(l=arguments[p-1]);for(var d=1;d<p;++d)if(null!=(s=arguments[d]))for(e in s)if(s.hasOwnProperty(e)){if(u=f[e],f==(o=s[e]))continue;l&&o&&((a=n(o,"Array"))||r(o))?(a?(a=!1,c=u&&i(u)?u:[]):c=u&&r(u)?u:{},f[e]=t(c,u,!0)):null!=o&&(f[e]=o)}return f}function n(e,t){return Object.prototype.toString.call(e)==="[object "+(t||"Object")+"]"}function r(e){return"object"===typeof e&&!!e}function i(e){return Array.isArray(e)||n(e,"Array")}Object.assign="function"==typeof Object.assign?Object.assign:t,GY.extend("Util.object",{clone:function e(t){var n,o,a=i(t)?[]:{};if(r(t))for(n in t)t.hasOwnProperty(n)&&t[n]&&(r(o=t[n])?a[n]=e(o):a[n]=o);return a},extend:t,toStr:function(e,t){var n,r="";for(n in e)e.hasOwnProperty(n)&&void 0!==e[n]&&(r+=n+"="+(t?encodeURIComponent(e[n]):e[n])+"&");return r.slice(0,r.length-1)},toString:function e(t){var n,r,i,o,a;switch(typeof t){case"string":return'"'+t.replace(/(["\\])/g,"\\$1")+'"';case"array":return"["+t.map(e).join(",")+"]";case"object":if(t instanceof Array){for(n=[],r=t.length,i=0;r>i;i++)n.push(e(t[i]));return"["+n.join(",")+"]"}if(null==t)return"null";for(a in o=[],t)o.push(e(a)+":"+e(t[a]));return"{"+o.join(",")+"}";case"number":case"boolean":return t}},isObject:r,isObjectByType:n,isEmptyObject:function(e){if(r(e))for(var t in e)return!1;return!0},isArray:i,includes:function(e,t){if(i(e))return e.indexOf(t)>-1;if(!r(t))return!1;var n=!0;for(var o in t)if(t.hasOwnProperty(o)&&e[o]!=t[o]){n=!1;break}return n}})}(),function(e,t,n){var r=["decodeURIComponent","decodeURI","unescape"];function i(e,t,n){if(!e)return document.cookie;n=n||{};var r=e+"="+encodeURIComponent(t);if("number"==typeof n.expires){var i=new Date;i.setTime(i.getTime()+864e5*n.expires),n.expires=i}return this[e]||this.length++,this[e]=t,document.cookie=[r,n.expires?"; expires="+n.expires:"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure="+n.secure:""].join(""),document.cookie}function o(e){if(e)for(var t=document.cookie.split("; "),n=0;n<t.length;++n){var r=t[n].split("=");if(r[0]==e)return this[e]?this[e]=r[1]:(this[e]=r[1],this.length++),decodeURIComponent(r[1])}}function a(e,t,n){if(e){var r=e+"="+encodeURIComponent("undefined");r+="; expires="+new Date(1970).toGMTString(),t&&(r+="; domain="+t),n&&(r+="; path="+n),document.cookie=r,"length"!==e&&(delete this[e],this.length--)}}function c(e,t){localStorage.setItem(e,t)}function s(e){return localStorage.getItem(e)}function u(e){localStorage.removeItem(e)}var l=localStorage||sessionStorage;GY.extend("Util.cookie",function(){var e={},t=document.cookie.split("; ");if(Object.defineProperty(e,"set",{enumerable:!1,writable:!0,configurable:!1,value:i}),Object.defineProperty(e,"get",{enumerable:!1,writable:!0,configurable:!1,value:o}),Object.defineProperty(e,"del",{enumerable:!1,writable:!0,configurable:!1,value:a}),Object.defineProperty(e,"length",{enumerable:!1,writable:!0,configurable:!1,value:0}),t[0]){for(var n=t.length,c=0;c<n;++c){var s=t[c].split("=");for(var u in r){try{e[s[0]]=window[r[u]](s[1])}catch(e){}if(e[s[0]])break}e[s[0]]||(e[s[0]]=s[1])}e.length=n}return e}()),GY.extend("Util.localStorage",{set:c,get:s,del:u}),GY.extend("Util",{setStorage:function(e,t){c(e,t)},getStorage:function(e){return s(e)||GY.Util.cookie.get(e)||""},delStorage:function(e){u(e),GY.Util.cookie.del(e)},storage:function(e,t,n){var r=(new Date).getTime();if(null==t){var i;try{i=JSON.parse(l.getItem(e)||"null")}catch(e){i=null}return!i||i.e<r?(l.removeItem(e),null):i.d}var o=r+(n||864e5);l.setItem(e,JSON.stringify({e:o,d:t}))}})}(0,0,window.Zepto||window.jQuery),function(e){function t(e,t){"string"==typeof e&&(e=e.replace(/-/g,"/")),e instanceof Date||(e=new Date(e)),t||(t="yyyy-MM-dd hh:mm:ss");var n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),"S+":e.getMilliseconds()};for(var r in/(y+)/i.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+r+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?n[r]:("00"+n[r]).substr((""+n[r]).length)));return t}GY.extend("Util.time",{formatDate:t,diffDate:function(e,t,n){"string"==typeof e&&(e=e.replace(/-/g,"/")),"string"==typeof t&&(t=t.replace(/-/g,"/"));var r=new Date(e),i=new Date(t);if(parseInt(i-r)<0){var o=r;r=i,i=o}switch(n){case"u":return parseInt(i-r);case"s":return parseInt((i-r)/1e3);case"m":return parseInt((i-r)/6e4);case"h":return parseInt((i-r)/36e5);case"d":return parseInt((i-r)/864e5);case"w":return parseInt((i-r)/6048e5);case"M":return i.getMonth()+1+12*(i.getFullYear()-r.getFullYear())-(r.getMonth()+1);case"y":return i.getFullYear()-r.getFullYear()}},smartDiffDate:function(e,t){"string"==typeof e&&(e=e.replace(/-/g,"/")),"string"==typeof t&&(t=t.replace(/-/g,"/"));var n=new Date(e),r=new Date(t);if(parseInt(r-n)<0){var i=n;n=r,r=i}var o=parseInt(r-n),a={n:0,u:"ms"};return o%1e3&&0==parseInt(o/1e3)?(a.u="ms",a.n=o,a):(o=~~(o/=1e3),a.u="s",a.n=o,0==parseInt(o/60)?(a.u="s",a.n=o,a):(o=~~(o/=60),a.u="m",a.n=o,0==parseInt(o/60)?(a.u="m",a.n=o,a):(o=~~(o/=60),a.u="h",a.n=o,0==parseInt(o/24)?(a.u="h",a.n=o,a):(o=~~(o/=24),a.u="d",a.n=o,r.getMonth()+1+12*(r.getFullYear()-n.getFullYear())-(n.getMonth()+1)>0?(o=r.getMonth()+1+12*(r.getFullYear()-n.getFullYear())-(n.getMonth()+1),a.u="M",a.n=o,r.getFullYear()-n.getFullYear()>0?(o=r.getFullYear()-n.getFullYear(),a.u="y",a.n=o,a):a):a))))},diffTimeFromNow:function(e,t){"string"==typeof e&&(e=e.replace(/-/g,"/"));for(var n=(t=t||window.op_time||"")?new Date(t):new Date,r=new Date(e),i=Math.abs(n-r),o=[1e3,6e4,36e5,864e5],a=["刚刚"," 秒前"," 分钟前"," 小时前"," 天前"],c=0;c<o.length;++c)if(i<o[c])return 0==c?a[0]:~~(i/o[c-1])+a[c];var s=n.getFullYear()-r.getFullYear(),u=n.getMonth()-r.getMonth();if(s>=0){if(console.log("xxxx---\x3e",e),u<0){if(0==s)return e;u=12+u,s--}var l=n.getDate()-r.getDate();return u>0&&l<0&&u--,0==u&&0==s?Math.abs(~~(i/o[c-1]))+a[c]:s?s+"年前":u+"个月前"}return e},unixToDate:function(e,n,r){return n?(!r&&(e+"").length<=10&&(e*=1e3),t(new Date(e),n)):new Date(e)},dateToUnix:function(e){return Math.round(new Date(e).getTime()/1e3)}})}(),function(e,t){var n,r,i,o=((n=function(){}).prototype=GY,new n),a={safe:function(e){return(e||"").replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;")}},c=((i=function(e,t,n,c,s){var u="",l=e,f=c||String.fromCharCode(60)+String.fromCharCode(37),p=s||String.fromCharCode(37)+String.fromCharCode(62),d=null==n||!!n,g=null;if(-1!=e.indexOf(f))u=e;else if(!d||!(g=r[e])){var h=document.getElementById(e);if(h)try{u=h.innerHTML,[].push(h),h=null}catch(e){console.error(e.stack||e)}else d||(g=r[e])}if(!u&&!g)return"";if(!g){seperAR=f.replace(/([\\\{\}\[\]])/g,"\\$1"),seperBR=p.replace(/([\\\{\}\[\]])/g,"\\$1");var m,y=new RegExp(seperAR+"(.+?)"+seperBR,"gm"),v=[];u=(u=(u=(u=(u=(u=u.replace(/[\r\n]/g,"").replace(y,(function(e,t,n,r){return"${$"+(v.push(t)-1)+"$}$"}))).replace(/[\t\n\r]/g,"")).replace(/([\\'"])/g,"\\$1")).replace(/<!\-\-.*?\-\->/g,"").replace(/>(\s+?)/g,">").replace(/(\s+?)</g,"<")).replace(/\$\{\$(\d+)\$\}\$/g,(function(e,t){if(m=(m=v[t]).replace(/(^\s+)|(\s+$)/gi,""))return"="==m.charAt(0)?'";_T_+='+m.substr(1)+';_T_+="':"#"==m.charAt(0)?'";_T_+=_$.safe('+m.substr(1)+');_T_+="':"{"==m.charAt(m.length-1)?'";'+m+'_T_+="':'";'+m+';_T_+="'}))).replace(/(;+)/,";"),v=null;var _="$DATA=$DATA||{};with($DATA){try{"+(u='var _T_="'+u+'";function $Echo(s){_T_+=String(s);return _T_;}')+"}catch(e){$errFn(e);}return _T_;}";g=null;try{g=new Function("$DATA","$Tmpl","$errFn","$G","_$",_)}catch(e){console.error("Function error in template:%s\n====TempleContent:",u,_),console.error("ErroInfo:",e.stack||e),g=function(){}}l&&d&&(r[l]=g)}return g(t||{},l?function(e,t,n,r,o){return e==l?(console.error("模板{#%s}内存在调用死循环!",l),""):i(e,t,n,r,o)}:i,(function(e){console.error("###Error in template["+l+"]",e.stack||e,"Temp:\n",g)}),o,a)}).__cache=r={},i);GY.extend("tpl",{getHTML:c,parse:c,$G:o,_ver:"0.1.1"})}(0,window),function(e){var t=require("Util");function n(e,n){var r=location.search.substr(1),i=t.string.toObj(r),o=e?i[e]:i;return"string"==typeof o?n?decodeURIComponent(o):t.string.toSafe(decodeURIComponent(o)):""}function r(){return location.origin?location.origin+location.pathname:(e=location.href,(t=e.lastIndexOf("#"))>0&&(e=e.substring(0,t)),(t=e.lastIndexOf("?"))>0&&(e=e.substring(0,t)),e);var e,t}GY.extend("Util.uri",{getUriPar:n,getHashPar:function(e){var n=location.hash.substr(1),r=t.string.toObj(decodeURIComponent(n)),i=e?r[e]:r;return"string"==typeof i?t.string.toSafe(i):i},getUri:function(){return location.href},getHost:function(){return location.host},getPath:r,getOriginHref:function(){var e=location.search,t=n("code");e=e.indexOf("?code=")>-1?e.replace("code="+t,""):e.replace("&code="+t,"");var i=n("state");return e=e.indexOf("?state")>-1?e.replace("state="+i,""):e.replace("&state="+i,""),r()+("?"==e?"":e)+location.hash},getUrlSignature:function(e,n){"string"==typeof e&&(e=t.string.toObj(e));var r=[];return Object.keys(e).sort((function(e,t){return e>t?1:-1})).forEach((function(t){r.push(e[t])})),r.push(n),GY.Busi.authorize.encodeToken(r.join(""))}})}(),GY.extend("Util.window",{getScrollTop:function(){var e;return window.pageYOffset?e=window.pageYOffset:document.compatMode&&"BackCompat"!=document.compatMode?e=document.documentElement.scrollTop:document.body&&(e=document.body.scrollTop),e},textareaAdapt:function(){$((function(){$("textarea").on("input",(function(e){$(this).height(this.scrollHeight)}))}))},pageShow:function(){window.addEventListener("pageshow",(function(e){e.persisted&&window.location.reload()}))}}),function(e){var t=function(){var e=[],t=[],n="data-lazy",r=0,i=30,o=!0,a="",c=.2,s=6,u=0,l=0,f="1",p=0,d=function(){u=window.scrollY||document.body.scrollTop,l=(window.scrollY||document.body.scrollTop)+screen.availHeight},g=function(e){d(),g.has_init||(g.has_init=!0,$(document).on("scroll",b).on("touchmove",b).on("touchend",b),fn_int=function(){})},h=function(){r--,e.length&&setTimeout(_load_img)},m=function(e){"2"==f&&($(e.target).parent().css("background-image"," url("+$(e.target).attr("src")+")"),$(e.target).hide());var t="1"==$(e.target).attr("_use_tran");v(e.target,t),h()},y=function(e){v(e.target,"1"==$(e.target).attr("_use_tran")),"2"==f?$(e.target).css("background-image","url("+a+")"):$(e.target).attr("src",a),h()},v=function(e,t){var n=$(e);n.off("load").off("error").off("abort"),t?(n.css({opacity:1}),setTimeout((function(){n.css({transition:"",opacity:""}),e.removeAttribute("_use_tran")}),1e3*c)):n.css("visibility","visible")};_load_img=function(){if(!e.length||r>=s)console.log("[lazy_load]>>____no Imgs",e.length,r);else{r++;var t=e.pop();a?(t.itm.on("load",m),t.itm.on("error",y).on("abort",y)):t.itm.on("load",m).on("error",y).on("abort",m),"2"==f?t.itm.hide():t.itm.css("visibility","visible"),t.itm.attr("src",t.src).attr("_c_lazy_itm_",null),t.itm.parent().hasClass("background-lazy")&&t.itm.parent().removeClass("background-lazy")}};var _=GY.rateControll((function(){if(d(),t.length){for(var n,r=t.length,o=[];r-- >0;)(n=t[r]).itm&&n.itm.length&&n.itm.get(0).parentNode&&("pos"in n&&n.pos.top<=l&&n.pos.bottom>=u||(n.pos={})&&(n.pos.top=n.itm.offset().top-i)<=l&&(n.pos.bottom=n.itm.height()+n.pos.top+i)>=u?e.push(n):o.push(n));e.sort((function(e,t){return e.pos.top<t.pos.top?1:e.pos.top==t.pos.top?0:-1})),t.length=0,o.length&&(o.unshift(0,0),t.splice.apply(t,o)),e.length&&_load_img()}}),.2),b=GY.rateControll((function(){$("img["+n+"]").each((function(e,r){(r=$(r)).attr(n)&&(r.attr("_c_lazy_itm_"),o?(r.attr("_use_tran",1),r.css("opacity",p),r.css("transition","opacity "+c+"s")):r.css("visibility","hidden"),t.push({itm:r,src:r.attr(n)})),r.attr(n,null)})),t.length&&_(),e.length&&_load_img()}),.1);return function(e){f=e&&e.load_ele_type?e.load_ele_type:"1",e&&e.opacity&&(p=e.opacity),e&&e.offset&&(i=e.offset),g(e),e&&e.lazyProperty&&(n=e.lazyProperty),e&&!isNaN(e.maxItemLoaders)&&e.maxItemLoaders-0==e.maxItemLoaders&&(s=Math.max(e.maxItemLoaders-0,1)),e&&e.rollBackImg&&(a=e.rollBackImg),e&&e.transIn?(isNaN(e.transIn)&&e.transIn-0==e.transIn?(c=e.transIn/1e3)<0&&(c=0):c=.3,o=!0):e&&"transIn"in e&&(o=!1),d(),b()}}();GY.extend("Util.img",{lazyImages:t})}(),function(e){var t,n=navigator.userAgent||"",r=n.match(/(iPad).*OS\s([\d_]+)/),i=!r&&n.match(/(iPhone\sOS)\s([\d_]+)/),o=n.match(/(iPod).*OS\s([\d_]+)/),a=n.match(/(Android)\s+([\d.]+)/)||n.match(/Android/),c=n.match(/Windows Phone ([\d.]+)/),s={iPad:r,iPhone:i,android:a,wp:c,isMobile:!!(r||i||r||c||a)},u=(i||r||o?t="ios":a?t="android":c&&(t="wp"),t),l=function(){var e=n.match(/MicroMessenger\/([\d\.]+)/i),t=n.match(/QQ\/([\d\.]+)/),r=n.match("Qzone"),i=n.match(/Now\/([\d\.]+)/),o=n.match("QQBrowser"),a=n.match("qqnews"),c=n.match("QQMusic"),s=n.match("qqlive"),u="";return t?u="qq":r?u="qzone":e?u="wx":o?u="mqqbrowser":i?u="Now":a?u="qqnews":c?u="qqmusic":s&&(u="qqlive"),u}();GY.extend("browser",{os:s,platform:u,client:l})}(),function(e,t){var n=require("Util");if(t.GY){var r="action_index";GY.extend("Sys",{run:function(e){i(e);var t=!1;e&&e.hash&&(t=!0),t?($(window).bind("hashchange",(function(){i(e),o()})),o(),_isInitHash=!0):o()},ajax:function(e){var t={type:"GET",dataType:"jsonp",timeout:8e3};e&&GY.is_obj(e)&&$.extend(t,e),t.success=function(n,r,i){e&&"function"==typeof e.success&&e.success(n,r,i);try{+n.code>=110021&&+n.code<=110027||110033==+n.code||110063==+n.code?GY.Reporter.loginError({cgi:t.url,data:t.data,httpInfo:{code:i.status},return:n}):(+n.code&&1!=+n.code||+n.ret&&1!=+n.ret)&&GY.Reporter.interfaceError({cgi:t.url,data:t.data,httpInfo:{code:i.status},return:n})}catch(e){}},t.error=function(r,i){try{var o={msg:i||""},a=0;"timeout"==i&&(a=1);"json"==t.dataType&&r.readyState&&(o.res=r.responseText),1==a&&(o.timeout=t.timeout||0,"接口超时"),"abort"==i&&(o.pf=GY.browser.platform),GY.Sys.rpt.info("url:"+t.url+"; par:"+n.object.toStr(t.data)+";ext:"+n.object.toStr(o),!0),GY.Reporter.interfaceError({cgi:t.url,data:t.data,httpInfo:{code:r.status},return:o})}catch(e){}e&&GY.is_fun(e.error)&&e.error(r,i)},"GET"==t.type&&"json"!=t.dataType&&(t.jsonp="jsoncallback",t.jsoncallback="?"),t.success=function(n){try{if("jsonp"==t.dataType){var r={category:"jsonp",timestamp:Date.parse(new Date)/1e3,data:{url:t.url,data:t.data,status_code:"200",cgi_code:n.code,method:t.type}};GY.Sys.offLine.addLog(r)}}catch(e){}e&&GY.is_fun(e.success)&&e.success(n)},$.ajax(t)},__init:function(){!GY.user&&(GY.user={uid:"",nick:"",face:""})},getActionName:function(){return r}})}function i(e){var t={rulePar:"a"},i="";$.extend(t,e),i=t.rulePar,i=1==t.hash?n.uri.getHashPar(i):n.uri.getUriPar(i),r=i?"action_"+i:"action_index"}function o(){"function"==typeof GY.Busi.pageInit&&GY.Busi.pageInit(),"function"==typeof GY.Busi[r]&&GY.Busi[r]()}}(0,window),function(e){var t=!1,n=[],r=[],i={},o={},a={id:1188,uin:0,url:"",combo:1,ext:null,level:4,ignore:[],random:1,delay:1e3,submit:null,repeat:5,bjRptUrl:"",gyRptUrl:"http://yundonate.gongyi.qq.com/cgi-bin/WhiteReportMsg.fcgi",isGyRpt:0,gyRandom:0},c=function(e,t){return Object.prototype.toString.call(e)==="[object "+(t||"Object")+"]"},s=function(e){return"object"===typeof e&&!!e};var u=e.onerror,l=console&&console.error;e.onerror=function(t,n,r,i,o){var a=t;o&&o.stack&&(a=f(o)),c(a,"Event")&&(a+=a.type?"--"+a.type+"--"+(a.target?a.target.tagName+"::"+a.target.src:""):""),b.push({msg:a,target:n,rowNum:r,colNum:i}),v();try{GY.Reporter.jsError(a)}catch(e){}u&&u.apply(e,arguments)},console&&(console.error=function(e){if(e instanceof Error){var t=f(e);c(t,"Event")&&(t+=t.type?"--"+t.type+"--"+(t.target?t.target.tagName+"::"+t.target.src:""):"");try{GY.Reporter.jsError(t)}catch(e){}}l(e)});var f=function(e){var t=e.stack.replace(/\n/gi,"").split(/\bat\b/).slice(0,9).join("@").replace(/\?[^:]+/gi,""),n=e.toString();return t.indexOf(n)<0&&(t=n+"@"+t),t},p=function(e,t){var n,r=[],i=[],o=[];if(s(e))for(var u in e.level=e.level||a.level,e){var l=e[u];if(null!==(n=l)&&(c(n,"Number")||n)){if(s(l))try{l=JSON.stringify(l)}catch(e){l="[BJ_REPORT detect value stringify error] "+e.toString()}o.push(u+":"+l),r.push(u+"="+encodeURIComponent(l)),i.push(u+"["+t+"]="+encodeURIComponent(l))}}return[i.join("&"),o.join(","),r.join("&")]},d=function(e,t){if(!s(e))return!0;var n=e.msg;return("gy"==t?o[n]=(parseInt(o[n],10)||0)+1:i[n]=(parseInt(i[n],10)||0)+1)>a.repeat},g=[],h=[],m=0,y=0,v=function(e){_("gy",e),_("badjs",e)},_=function(e,t){var i="gy"==e,o=i?a.gyRptUrl:a.bjRptUrl;if(o){for(var s=i?r:n,u=i?h:g;s.length;){var l=!1,f=s.shift();if(!d(f,e)){var v=p(f,u.length);if(c(a.ignore,"Array"))for(var _=0,b=a.ignore.length;_<b;_++){var w=a.ignore[_];if(c(w,"RegExp")&&w.test(v[1])||c(w,"Function")&&w(f,v[1])){l=!0;break}}l||(a.combo?u.push(v[0]):(v[2],new Date),a.onReport&&a.onReport(a.id,f))}}if(u.length){var k=function(){g.length&&(clearTimeout(m),a.bjRptUrl,g.join("&"),g.length,new Date,m=0,g=[])},S=function(){h.length&&(clearTimeout(y),a.gyRptUrl,h.join("&"),h.length,new Date,y=0,h=[])};t?i?S():k():i&&!y?y=setTimeout(S,a.delay):m||(m=setTimeout(k,a.delay))}}},b=e.BJ_REPORT={push:function(e,t){if(Math.random()>=a.random)return b;var i=s(e)?function(e){try{if(e.stack){var t=e.stack.match("https?://[^\n]+"),n=(t=t?t[0]:"").match(":(\\d+):(\\d+)");return n||(n=[0,0,0]),{msg:f(e),rowNum:n[1],colNum:n[2],target:t.replace(n[0],"")}}return e.name&&e.message&&e.description?{msg:JSON.stringify(e)}:e}catch(t){return e}}(e):{msg:e};return a.ext&&!i.ext&&(i.ext=a.ext),i.from||(i.from=encodeURIComponent(location.href)),"gy"==t?r.push(i):n.push(i),v(),b},report:function(e){return e&&b.push(e),v(!0),b},info:function(e,n,r){if(t||n)return e?(s(e)?e.level=2:e={msg:e,level:2},"gy"==r?b.push(e,"gy"):b.push(e),b):b},gyInfo:function(e,n,r){if(!t&&Math.random()>=a.gyRandom&&!r)return b;var i={class:"performace",type:"page",i:location.pathname||"",m:GY.browser.client,msg:e};return t&&(i.class="white"),n&&$.extend(i,n),this.info(i,!0)},gyErr:function(e,t){return t||((t={}).class="error"),this.gyInfo(e,t,!0)},gyWhite:function(e,n){if(t)return this.gyInfo(e,n,!0)},debug:function(e,n){if(t||n)return e?(s(e)?e.level=1:e={msg:e,level:1},b.push(e),b):b},init:function(e){if(s(e))for(var i in e)a[i]=e[i];var o=parseInt(a.id,10);if(o){console.log("localhost:"+location.hostname),/qq\.com$/gi.test(location.hostname)&&(a.url||(console.log("qq domain"),a.url="//badjs2.qq.com/badjs"),a.uin||(a.uin=GY.user.uid||0));var c="?id="+o+"&uin="+a.uin+"&";a.report=(a.url||"/badjs")+c,a.bjRptUrl=a.report,a.gyRptUrl=a.gyRptUrl+c}return(n.length||r.length)&&v(),function(){if(x||!a.uin||!t)return;b.gyWhite({t:"页面访问",get_par:location.search||"-",hash:location.hash||"-"}),x=!0}(),b},__onerror__:e.onerror};"undefined"!=typeof console&&console.error&&setTimeout((function(){var e=((location.hash||"").match(/([#&])BJ_ERROR=([^&$]+)/)||[])[2];e&&console.error("BJ_ERROR",decodeURIComponent(e).replace(/(:\d+:\d+)\s*/g,"$1\n"))}),0);var w=function(e){"object"==typeof window.wx&&"function"==typeof wx.ready&&wx.ready(e)},k=!1;function S(){if(GY.user.uid&&!k&&!t){var e="_wnm_u_"+GY.user.uid;a.uin=GY.user.uid,a.report=(a.url||"/badjs")+"?id="+a.id+"&uin="+GY.user.uid+"&";if(_isWhiteName=function(e,n,r){if(e){var i=window.localStorage||window.sessionStorage;if(null==n){var o,a=i.getItem(e);if(a)try{return(o=JSON.parse(a)).ex&&o.ex<curTime?(i.remove(e),o=void 0):o="ex"in o?o.d:o,o}catch(e){o=void 0}}else r=r||36e6,i.setItem(e,JSON.stringify({d:n,ex:curTime+1e3*r})),t=!0}}(e),_isWhiteName)return console.log("Lsc get white name!"),void(t=!0);sessionStorage.getItem("isInitWuser")}}var x=!1;GY.extend("Sys.rpt",$.extend({__init:function(){GY.browser&&"wx"==GY.browser.client?w((function(){b.init(e.bjConf)})):b.init(e.bjConf),S()},getConf:function(){return a},setConf:function(e){if(e&&s(s))for(var t in e)a[t]=e[t]},initWhiteUser:S,chkWhite:function(){return!!t}},b))}(window),function(e){function t(e,t,n){var r=document.createElement("script");r.onerror=r.onabort=function(n){r.onload=r.onerror=r.onabort=null,console.log("script %s load faild!",e),t&&t(r,!1)},r.onload=function(){r.onload=r.onerror=r.onabort=null,t&&t(r,!0),setTimeout((function(){try{r.parentNode&&r.parentNode.removeChild(r)}catch(e){}}),.1)},r.type="text/javascript",n&&r.setAttribute("charset",n),r.setAttribute("src",e),console.log("new script:",r),document.getElementsByTagName("head")[0].appendChild(r)}var n=!1,r="/js/static/lib/",i={ktips:"lib.ktips.0.0.1.min","ktips.swip":"lib.ktips.swip.0.0.1.min"},o=!1,a=null,c="_gy_ktips_",s=[];var u=localStorage||sessionStorage;function l(e,t,n){var r=(new Date).getTime();if(null==t){var i;try{i=JSON.parse(u.getItem(e)||"null")}catch(e){i=null}return!i||i.e<r?(u.removeItem(e),null):i.d}var o=r+1e3*(n||86400);console.log("[KTIPS]Expired at:%s",o),u.setItem(e,JSON.stringify({e:o,d:t}))}function f(e){var u=(new Date).getTime();if(e)if(console.log("Args inti",e),"string"!=typeof e){var p,d,g=e.opt||{groupId:0,duration:604800},h=((new Date).getTime(),g.groupId||0),m=1e3*(g.duration||604800),y=null;if(console.log("[KTIPS]beg:%d,curdate:%s",1e3*(g&&g.begin),u,g.begin&&1e3*g.begin>u),console.log("[KTIPS]end:%d,curdate:%s",1e3*(g&&g.end),u,g.end&&1e3*g.end<u),!e.data||!e.data.length||g.begin&&1e3*g.begin>u||g.end&&1e3*g.end<u||(y=l(c))&&y[h]&&y[h]+m>u)console.log("[KTIPS]--ENot show");else if(n)s.push(e);else if(o||GY.Util&&"function"==typeof GY.Util.kTips){if(!(a=GY.Util.kTips||window.kTips))return void console.log("[KTIPS]No cls defined:%o",a);var v=e._cbFn,_=(e.opt||{}).groupId||0;e._cbFn&&delete e._cbFn,e.opt&&delete e.opt;var b=new a(e).init();console.log("[KTIPS]Cls:%o",a),p="ktips",d={show:_},setTimeout((function(){if(window.MtaH5)try{MtaH5.clickStat(p,d)}catch(e){console.log(e.stack||e)}}),200);var w=l(c)||{};w[_]=(new Date).getTime(),l(c,w,62208e4),"function"==typeof v&&v(b)}else{s.push(e),n=!0,t(r+i[window.Swipe?"ktips":"ktips.swip"]+".js",(function(){console.log("Script loaded",window.kTips),n=!1,o=!0,a=GY.Util.kTips||window.kTips,function(){for(;s.length;)f(s.shift())}()}))}}else{var k=/(&|\?)((jsonpCallback)|(callback))=([^&#\s]+)/gi.exec(e);k?$.ajax({url:e,jsonpCallback:k[5],success:function(e){f(e)}}):t(e,(function(e,t){window._ktips_config?(f(window._ktips_config),delete window._ktips_config):console.log("No config fund")}))}}GY.extend("Busi",{initKtips:f,loadscript:t})}(),GY.extend("Busi.ABTest",{getTestCase:getTestCase});var __CONF__={cgiUrl1:Protocol+"ssl.gongyi.qq.com",HOMEPAGE:"//ssl.gongyi.qq.com/m/weixin/index2_gzzh.htm"};!function(e){var t=window.GYCONF&&window.GYCONF.gyPlatform?window.GYCONF.gyPlatform:"def",n={appid:{def:"wxc0db45f411664b2e",weself:"wx7a196cf46f10944f",good_thing:"wx48fcd4e1feab09f0",hk_pay:"wx469f23412a57e9a4"}[t],we_spid:{def:"1800001841",weself:"1800001841",good_thing:"1800005211",hk_pay:"3900000011"}[t]||"1800001841",defaultNick:"爱心网友",defaultImg:"http://mat1.gtimg.com/gongyi/m/gylc/love_head.jpg",defaultWsImg:"http://mat1.gtimg.com/gongyi/weself/v1/defaultFace.png",mtaPar:{sid:500113607,cid:500117735},wxUidLocKey:"gy_wx_unionid",wxUNickLocKey:"gy_wx_uNick",wxUFaceLocKey:"gy_wx_uFace",UlinkidKey:"gy_wx_linkid"};n.localOidKey="openidwxa"+n.appid,n.wxappid=n.appid,n.gyPlatform=t,n.relationSKey="gy_relation_key",window.GYCONF&&$.extend(n,window.GYCONF),GY.extend("Busi.config",{get:function(e){return e&&n[e]?n[e]:n},set:function(e,t){!t&&GY.is_obj(e)?e&&$.extend(n,e):e&&t&&(n[e]=t)}})}(),function(e){var t=require("Busi"),n=require("Util"),r=require("Sys"),i=require("browser"),o=t.config.get();function a(){var e=o.relationSKey,t=sessionStorage.getItem(e);return t?t.split(","):""}function c(){var e=["pid","proj","id","did","plan","planid","cid","aid","rid","rowkey","tradeno","transcode","ver"],t="",n={};if(location.search)for(var r=location.search.replace(/\?/g,"").split("&"),i=0;i<r.length;i++){var o=r[i].split("=");n[o[0]]=o[1]}if(location.hash)for(var a=location.hash.replace(/\#/g,"").split("&"),c=0;c<a.length;c++){var s=a[c].split("=");n[s[0]]=s[1]}for(c=0;c<e.length;c++){var u=e[c];n[u]&&(t?t+=`,${u}=${n[u]}`:t=`${u}=${n[u]}`)}return t||(t=location.pathname),console.log("icontent:",t),t}function s(){var e=document.location.pathname,t="";if(/\/m\/(weixin|wxact)\//.test(e))switch(e=e.replace(/\/m\/(weixin|wxact)\//,"")){case"index2_gzzh.htm":t="index";break;case"detail.htm":t="once";break;case"detail_yqj.htm":t="yqj";break;case"yqj_main.html":t="comyqj";break;case"report_detail.html":t="process";break;case"gopayv3.html":case"gopay.html":t="calm";break;case"loveMonthly.html":t="report";break;case"month_detail.html":t="month";break;case"planSet.html":t="1v1";break;case"detail_tplan.html":t="1v1yqj";break;case"info_article.html":t="news";break;default:t=e.substr(0,5)}else t=e.substring(e.indexOf("/"),e.lastIndexOf("/"));return t}GY.extend("Busi.relation",{report:function(e){var n=a();if(console.log("report session:",n),n){var o={stype:s(),icontent:c()};if(o=Object.assign(o,e),n.length>1){o.open_id=n[0],o.sopen_id=n[1],n[2]&&(o.popen_id=n[2]);for(var u=["stype","itype","icontent","open_id","popen_id","sopen_id"],l="",f=0;f<u.length;f++){var p=u[f];o[p]&&(l+=o[p])}o.hk=t.authorize.encodeToken(l);var d=`https://ssl.gongyi.qq.com/cgi-bin/gywhd_gyrc_report_interact?oid=${GY.user.uid}`;d="wx"==i.client?d+"&gysts="+t.authorize.encodeToken():d+"&g_tk="+t.authorize.encodeToken(),r.ajax({url:d,data:JSON.stringify(o),type:"post",dataType:"json",success:function(t){0==t.code&&console.log("report relation data success"),"function"==typeof e.callback&&e.callback(t)},error:function(){console.log("report relation fail"),"function"==typeof e.callback&&e.callback(resData)}})}}else"function"==typeof e.callback&&e.callback()},get:a,init:function(e){if(console.log("init:",GY.user.linkid),GY.user.linkid){var t=n.uri.getUriPar("parent1")||"",r=n.uri.getUriPar("parent2")||"",i=o.relationSKey,c="",s=GY.user.linkid;t&&r?c=s+","+t+","+r:t?c=s+","+t:((c=a())?c[0]!=s&&c.unshift(s):c=[s],c=c.join(",")),c&&sessionStorage.setItem(i,c)}"function"==typeof e&&e()},getUrl:function(e){var t=a();if(t){var n="parent1="+t[0];t[1]&&(n=n+"&parent2="+t[1]);var r=e.split("?");if(r[1]){var i=r[1],o="";if(i.indexOf("#")>-1){var c=i.split("#");o=c[1],i=c[0]}r[1]=i+"&"+n,o&&(r[1]=r[1]+"#"+o)}else r[1]=n;return r.join("?")}return e}})}(),function(e,t){var n=require("Util"),r={mta_prop:"data-mta",mta_propVal:"data-mta-param"};function i(e){if(console.log("body clik"),window.MTA_NOT_AUTO||!window.MtaH5)return $(document.body).off("click",i),void console.log("click removed!");window.objMta=e.target;var t=$(e.target).closest("["+r.mta_prop+"]"),n=t.attr(r.mta_prop),o=t.attr(r.mta_propVal);if(n){if(o){var a=o,c=[JSON.parse,eval];if(/\{.+\}/gi.test(a))for(var s=0,u=c;s<u;s++)try{o=c[s](a)||null;break}catch(e){}(!o||"string"==typeof o||"number"==typeof o)&&((o={})[a]=!0)}try{o?MtaH5.clickStat(n,o):MtaH5.clickStat(n)}catch(e){}}else console.log("not mta..",n)}function o(e){if(e=e||{},window.MTA_PROP_NM&&!e.mta_prop&&(e.mta_prop=MTA_PROP_NM),window.MTA_PROP_VAL_NM&&!e.mta_propVal&&(e.mta_propVal=MTA_PROP_VAL_NM),e)for(var t in e)r[t]=e[t];$(document.body).off("click",i).on("click",i)}t._mtac={performanceMonitor:1,senseQuery:1};var a=GY.Busi.config.get();GY.extend("Sys.mta",{__init:function(e){if(!t.MtaH5||e){var n=a.mtaPar;e&&$.extend(n,e),function(){var e=document.createElement("script");e.src="//pingjs.qq.com/h5/stats.js?v2.0.2",e.setAttribute("name","MTAH5"),e.setAttribute("sid",n.sid),e.setAttribute("cid",n.cid);var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t),window.MTA_NOT_AUTO||o()}()}},click:function(e){try{var t=e&&e.t?e.t:"click",n=e&&e.p?e.p:{def:"true"};MtaH5&&MtaH5.clickStat(t,n)}catch(e){}},init:o,gyPvStat:function(e){setTimeout((function(){try{var t=e||window.pvgyPage||"",r=n.uri.getUriPar("et"),i=n.uri.getUriPar("ADTAG");r=r||i;var o={appid:GY.Busi.config.get("appid"),adtag:i,et:r,page:t,openid:GY.user&&GY.user.uid||"",relays:0};if(!t)switch(document.location.pathname){case"/m/weixin/index2_gzzh.htm":o.page="sy";break;case"/m/weixin/detail.htm":o.page="xqy";break;case"/m/weixin/detail_yqj.htm":o.page="pyqj";break;case"/m/weixin/yqj_main.html":o.page="qyqj";break;case"/m/weixin/thanks.html":o.page="gxy";break;default:o.page=document.location.pathname}if(!o.page)return;try{o.pid=n.uri.getUriPar("id")?n.uri.getUriPar("id"):n.uri.getUriPar("pid")?n.uri.getUriPar("pid"):n.uri.getHashPar("id")?n.uri.getHashPar("id"):""}catch(e){}var a=new Image,c=Math.floor(Date.now()/1e3);a.src="/cgi-bin/gywwe_PvMonitor?"+GY.Util.object.toStr(o)+"&hk="+n.uri.getUrlSignature(o,c)+"&_ct="+c}catch(e){console.log(e)}}),300)}})}(0,window),function(e,t){var n=require("Util"),r=require("Busi"),i=require("Sys"),o=r.config.get(),a=o.appid;function c(e){var r={snsapi:"snsapi_base",backurl:n.uri.getOriginHref()};e&&t.extend(r,e);var i=r.state?"&state="+r.state:"",o="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+a+"&redirect_uri="+encodeURIComponent(r.backurl)+"&response_type=code&scope="+r.snsapi+i+"#wechat_redirect";setTimeout((function(){window.location=o}),50)}function s(e){var r,s=e.code||n.uri.getUriPar("code"),l={getType:"getoid"};if(t.extend(l,e),l.ctype?l.getType=l.ctype:"snsapi_base"==l.snsapi?l.getType="getoid":"snsapi_userinfo"==l.snsapi?l.getType="getaccessoidinfo":l.getType="getoid",GY.user.uid&&""!=GY.user.uid){var f=GY.user.uid+"_"+s;if(1==+sessionStorage.getItem(f)){if(u(),GY.is_fun(l.success))return void l.success({});if("function"==typeof l.callback)return void l.callback({})}}r=l.loginCheck?__CONF__.cgiUrl1+"/cgi-bin/WXGyLogin?type="+l.getType+"&appid="+a+"&code="+s:__CONF__.cgiUrl1+"/cgi-bin/gywp_WXGetOIDInfo_eth1?type="+l.getType+"&appid="+a+"&code="+s;GY.Sys.ajax({url:r,jsonp:"jsoncallback",jsoncallback:"?",error:function(e,t){GY.is_fun(l.fail)&&l.fail(t)},success:function(e){if(void 0!==e.code&&void 0===e.ret&&(e.ret=e.code),0==e.ret){var t="";e.openid&&(t=e.openid),e.oid&&(t=e.oid),t&&(GY.user.uid=t)&&n.setStorage(o.localOidKey,t);var r=e.uid||e.unionid||"";r&&(GY.user.unionid=r)&&n.setStorage(o.wxUidLocKey,r);var f=e.linkid||"";f&&(GY.user.linkid=f,n.setStorage(o.UlinkidKey,f));var p=GY.user.uid+"_"+s;sessionStorage.setItem(p,1);try{n.setStorage("appid",GY.Busi.config.get("appid"))}catch(e){}e.nickname&&t&&(_lckNick="openidwxa"+a+t+"nick_yqj",_lckFace="openidwxa"+a+t+"imghead_yqj",GY.user.nick=e.nickname||"",GY.user.face=e.headimgurl||"",-1===GY.user.face.indexOf("http")&&(GY.user.face=""),n.setStorage(_lckNick,GY.user.nick),n.setStorage(o.wxUNickLocKey,GY.user.nick),n.setStorage(_lckFace,GY.user.face),n.setStorage(o.wxUFaceLocKey,GY.user.face),i.rpt.initWhiteUser()),u(),GY.is_fun(l.success)?l.success(e):"function"==typeof l.callback&&l.callback(e)}else if(40029==e.ret||40163==e.ret)c(l);else if(GY.Sys.rpt.info("decode:"+n.object.toString(e),!0),GY.is_fun(l.fail))return void l.fail(e)}})}function u(){try{r.relation.init()}catch(e){console.log(e)}}GY.extend("Busi.authorize",{encodeToken:function(e,t){var n=e||GY.Util.cookie.get("token");if(t&&!isNaN(t)||(t=3308),!n)return!1;for(var r=0,i=n.length;r<i;++r)t+=(t<<5)+n.charAt(r).charCodeAt();return 2147483647&t},getPayAuth:function(e){var r={snsapi:"snsapi_base",backurl:n.uri.getOriginHref(),spid:o.we_spid,scope:"pay_identity"};e&&t.extend(r,e);var i={mch_id:r.spid,appid:a,redirect_uri:encodeURIComponent(r.backurl),response_type:"code",scope:r.scope,state:r.state?r.state:Math.random()},c="https://payapp.weixin.qq.com/appauth/authindex?"+n.object.toStr(i);c+="#wechat_redirect",setTimeout((function(){window.location=c}),50)},getCode:c,deCode:s,auth:function(e){e=e||{};var t=n.uri.getUriPar("code");e.code=t,t?s(e):c(e)},__init:function(){GY.user.unionid=n.getStorage(o.wxUidLocKey)||"",GY.user.uid=n.getStorage(o.localOidKey)||"",GY.user.linkid=n.getStorage(o.UlinkidKey)||"",GY.user.uid&&(_lckNick="openidwxa"+a+GY.user.uid+"nick_yqj",_lckFace="openidwxa"+a+GY.user.uid+"imghead_yqj",GY.user.nick=n.getStorage(_lckNick)||n.getStorage(o.wxUNickLocKey)||"",GY.user.face=n.getStorage(_lckFace)||n.getStorage(o.wxUFaceLocKey)||"",i.rpt.initWhiteUser())},login:function(e){var r=n.uri.getUriPar("code"),i={snsapi:"snsapi_base",loginCheck:!0,ckUnionid:!1};e&&(i=t.extend(i,e)),i.ckUnionid&&(i.snsapi="snsapi_userinfo"),(n.getStorage("appid")==o.appid||r)&&(""==GY.Util.cookie.get("appid")||GY.Util.cookie.get("appid")==o.appid||r)&&(!i.ckUnionid||GY.user.uid&&GY.user.unionid||r)&&(GY.user.uid&&GY.user.linkid||r)&&("snsapi_userinfo"!=i.snsapi||GY.user.nick||r)?r?s(i):(u(),GY.is_fun(i.success)?i.success():i.callback&&GY.is_fun(i.callback)&&i.callback()):c(i)},clearCache:function(e){GY.user.uid&&(n.delStorage(_lckFace),e&&e.userinfo&&(_lckNick="openidwxa"+a+GY.user.uid+"nick_yqj",_lckFace="openidwxa"+a+GY.user.uid+"imghead_yqj",n.delStorage(_lckNick),n.delStorage(_lckNick)))},ckLogin:function(e){var n={snsapi:"snsapi_base",isGetCode:1};return e&&(n=t.extend(n,e)),!(110021<=n.code&&110027>=n.code)||(n.callback&&GY.is_fun(n.callback)&&n.callback(),n.isGetCode&&1==n.isGetCode&&c(n),!1)}})}(0,Zepto),function(e,t){var n,r=require("Busi"),i=require("Util"),o=require("Sys"),a=r.config;a.set("jsApiList",["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone","hideMenuItems","showMenuItems","hideAllNonBaseMenuItem","chooseWXPay","verifyWCPayPassword","getH5PrepayRequest"]),a.set("configFlag","no"),a.set("configTimes",0);var c=!1,s=function(e){window.onload=function(){if(!c){c=!0;var t=a.get("configTimes");t++;var r="/cgi-bin/WXCardSign?appid="+a.get("appid")+"&oid=config&url="+encodeURIComponent(window.location.href.split("#")[0]);o.ajax({url:r,dataType:"json",success:function(r){if(a.set("configTimes",t),0==r.ret){a.set("configFlag","yes");var u=r.info.sha_info;u.jsApiList=a.get("jsApiList"),u.beta=!0,wx.config(u),wx.ready((function(){c=!1,"function"==typeof n&&n(),e&&e.callback&&"function"==typeof e.callback&&e.callback()})),wx.error((function(n){if(c=!1,a.set("configFlag","no"),t<5)setTimeout((function(){s(e)}),500);else{try{o.rpt.info("签名1:"+i.object.toStr(r.info.sha_info)+",错误信息:"+i.object.toStr(n)+",referrer:"+document.referrer,!0)}catch(e){}try{GY.Reporter.info({event:"log",name:"sg_config_err",value:encodeURIComponent(JSON.stringify(r.info.sha_info))+"~"+encodeURIComponent(JSON.stringify(n))})}catch(e){}}}))}else if(c=!1,a.set("configFlag","no"),t<5)setTimeout((function(){s(e)}),500);else try{o.rpt.info("wx config error ret="+r.ret,!0)}catch(e){}}})}return!1}};GY.extend("Busi.js_conf",{init:s,checkConfigFlag:function(e){return"no"!=a.get("configFlag")||(n=e,s(),!1)}})}(0,Zepto),function(nameSpace,$){var Util=require("Util"),Sys=require("Sys"),Busi=require("Busi"),et="",wxoid=GY.user.uid,gt="",retObj={},_checkTimes=0,_interval,_config=Busi.config.get(),reqPar={},isCkOrdFlg=!1,iMaxMoney=1e5,iUpMoney=1e7,appPrkey="appPayReq",skeyET="payEt",skeyGT="payGt",pgTag="",CONST_MSG={exe_status:{code:2,msg:"该项目募款已结束，请关注最新执行进展！"},end_status:{code:3,msg:"该项目募款已结束，请查看结项报告！"},thr_ret:{msg:"前方爱心爆棚，请稍后再尝试"},close_month:{msg:"已经关闭月捐并且当月已经捐款"},busy:{code:3016,msg:"前方爱心爆棚，请稍后再尝试"},money_err:{code:30024,msg:"您输入的金额有误!"},more_busy:{code:110036,msg:"前方爱心爆棚，请稍后再尝试"},err_110063:{code:110063,msg:"您操作太频繁，请稍后尝试 (63)"},err_110065:{code:110065,msg:"前方爱心爆棚，请稍后再尝试 (65)"},par:{code:3017,msg:"参数错误"},cancel:{code:3011,msg:"您已取消支付"},trade_confirm:{msg:"如果支付完成了可以查看订单。"},def_confirm:{msg:"正在确认捐赠结果，请以捐赠记录为准"},sysErr:{code:999,msg:"服务器忙，请稍后重试"}},MAX_RETRY_TIME=3,currRetryTime=0,defEntryUrl="/cgi-bin/WXUnifiedDonateEntry";function init(){!sessionStorage.getItem(skeyET)&&Util.uri.getUriPar("et")?(sessionStorage.setItem(skeyET,Util.uri.getUriPar("et")),et=Util.uri.getUriPar("et")):et=sessionStorage.getItem(skeyET)?sessionStorage.getItem(skeyET):"p2_1",Util.uri.getUriPar("gt")?(sessionStorage.setItem(skeyGT,Util.uri.getUriPar("gt")),gt=Util.uri.getUriPar("gt")):sessionStorage.getItem(skeyGT)&&(gt=sessionStorage.getItem(skeyGT));var e=document.location.pathname.replace(/\/m\/(weixin|wxact)\//,"");switch(e){case"index2_gzzh.htm":pgTag="sy";break;case"detail.htm":pgTag="xq";break;case"detail_yqj.htm":pgTag="yq";break;case"yqj_main.html":pgTag="eq";break;case"report_detail.html":pgTag="jz";break;case"gopayv3.html":case"gopay.html":pgTag="lj";break;case"loveMonthly.html":pgTag="yk";break;case"month_detail.html":pgTag="yj";break;case"planSet.html":pgTag="11";break;case"info_article.html":pgTag="xw";break;default:pgTag=e.substr(0,2)}gt=pgTag+"_"+gt}function _set(e){if(GY.is_obj(e))for(var t in e)retObj[t]=e[t]}function _submit(e){if(1!=retObj.isWaitPay){isCkOrdFlg=!1,retObj.isWaitPay=1,_checkTimes=0;var t={appid:_config.appid,money:0,gf:"wx",oid:GY.user.uid,bank_type:"8001",busi_type:"WXL",trade_type:"JSAPI",entry_type:et};if(e&&$.extend(t,e),_checkPar(t)){try{e.smoney||(e.smoney=e.money+"")}catch(e){}if(e&&e.smoney){var n={};n.money=e.smoney,t.opar=encodeURIComponent(GY.Util.object.toString(n))}et&&(t.entry_type=et.substr(0,10)),t.sgt?t.gt=pgTag+"_"+t.sgt.substr(0,6):gt&&(t.gt=gt.substr(0,10)),t.money=parseInt(Math.round(1e3*t.money/10));var r=!1;"wx_wallet"==sessionStorage.getItem("gyref")&&GY.browser&&!GY.browser.os.android&&(r=!0),GY.browser&&!GY.browser.os.android&&(r=!0);try{"wx7a196cf46f10944f"==_config.appid&&(r=!1),"1"==GY.Util.cookie.get("dbg")&&"0"==Util.uri.getUriPar("ckpasswd")&&(r=!1)}catch(e){}if(t.money>=iUpMoney){var i="非常抱歉提醒您，因系统限制，单次支付无法超过10万元，请分次支付。";return GY.wd&&GY.wd.dialog&&GY.is_fun(GY.wd.dialog.confirm)?GY.wd.dialog.dialog({title:"温馨提示",msg:i,callback:function(){_payCallback(CONST_MSG.cancel)}}):(alert("温馨提示："+i),_payCallback(CONST_MSG.cancel),void $(".weui_dialog").css("z-index",1003))}if(!(t.money>=iMaxMoney))return s(),!1;var o=t.money/100,a="";o>=100&&(a="<br/>金额: "+Util.number.toChiness(o)+" 元");var c="您即将捐赠 <span style='color:#ff5d38;font-size:20px;font-weight:bold;'>"+o+"</span> 元"+a+"<br/>将直接由项目的公募机构所接收";GY.wd&&GY.wd.dialog&&GY.is_fun(GY.wd.dialog.confirm)?(GY.wd.dialog.confirm({title:"捐款确认",msg:c,callback:function(){s()},cancel:function(){_payCallback(CONST_MSG.cancel)}}),$(".weui_mask").css("z-index",1001),$(".weui_dialog").css("z-index",1003)):(c="您即将捐赠 "+o+" 元"+a.replace("<br/>","")+"，将直接由项目的公募机构所接收",window.confirm(c)?s():_payCallback(CONST_MSG.cancel))}}function s(){r?checkSign((function(){_ckPassWd(t)})):_mPay(t)}}function _mPay(e){var t=e.dataType||"jsonp";if("yqj"==e.btype&&defEntryUrl==retObj.ENTRY_URL)retObj.ENTRY_URL=retObj.ENTRY_YQJ_URL,t="json";else if("iot"==Util.uri.getUriPar("order")){var n=Util.uri.getUriPar("bid"),r=Util.uri.getUriPar("sign"),i=Util.uri.getUriPar("btr"),o=Util.uri.getUriPar("attach");n&&r&&(retObj.ENTRY_URL="/cgi-bin/gywp_iot_donate_entry_mt.fcgi",e.bid=n,e.sign=r,e.bt="s",i&&(e.btr=i),o&&(e.attach=o))}var a=retObj.ENTRY_URL+"?"+Util.object.toStr(e);defEntryUrl==retObj.ENTRY_URL&&(t="json"),Sys.ajax({url:a,dataType:t,success:function(t){if(retObj.isWaitPay=0,void 0===t.ret&&t.data&&!t.info&&(t.info=t.data),void 0!==t.code&&(t.ret=t.code),!t.info&&t.msg&&(t.info=t.msg),30031==t.ret&&t.msg.indexOf("ecard")>-1)return setTimeout((function(){e.ecard="",_mPay(e)}),800),!1;if(0==t.ret&&t.info)if(t.status&&0!=t.status)_payCallback(CONST_MSG.close_month);else{var n=t.info,r=n.trade_no;Util.setStorage("transcode"+_config.appid,r),sessionStorage.setItem("transcode"+_config.appid,r),retObj.trade_no=r,t.domain&&(retObj.domain=t.domain);try{GY.AmsReport.order(r,e.money)}catch(e){console.error(e)}if("hk"!=retObj.area){var i=function(){WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:n.appId,timeStamp:n.timeStamp,nonceStr:n.nonceStr,package:n.package,signType:n.signType,paySign:n.paySign},(function(e){if("get_brand_wcpay_request:ok"==e.err_msg)_checkTrade(!1),retObj.isCkOrd&&(_interval=setInterval(_checkTrade,2e3));else{if("get_brand_wcpay_request:jump_to_safari"!=e.err_msg)return"get_brand_wcpay_request:fail"==e.err_msg||"get_brand_wcpay_request:cancel"==e.err_msg?(_payCallback(CONST_MSG.cancel),void(GY.is_fun(retObj.cancelCallback)&&retObj.cancelCallback(e))):void _payCallback(CONST_MSG.cancel);retObj.isWaitPay=0,retObj.isCkOrd=!0,GY.is_fun(retObj.safariCallback)?retObj.safariCallback()&&setTimeout((function(){_checkTrade(!0)}),800):window.confirm("如果支付完成了可以查看订单。")?setTimeout((function(){_checkTrade(!0)}),800):_payCallback(CONST_MSG.cancel)}}))},o=typeof WeixinJSBridge;o&&"undefined"!=o&&null!=o?i():document.addEventListener?document.addEventListener("WeixinJSBridgeReady",i,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",i),document.attachEvent("onWeixinJSBridgeReady",i))}else wx.invoke("getH5PrepayRequest",{timeStamp:n.timeStamp,nonceStr:n.nonceStr,package:n.package,signType:n.signType,paySign:n.paySign},(function(e){}))}else if(t.ret==CONST_MSG.exe_status.code)_payCallback(CONST_MSG.exe_status);else if(t.ret==CONST_MSG.end_status.code)_payCallback(CONST_MSG.end_status);else if(t.ret==CONST_MSG.more_busy.code)_payCallback(CONST_MSG.more_busy);else if(t.ret==CONST_MSG.money_err.code){_payCallback(CONST_MSG.money_err);try{Sys.rpt.gyErr({t:"支付金额不一致",ret:t.ret||t.ret||-1,req:e||"",res:t}),Sys.rpt.info("支付金额不一致; par:"+Util.object.toStr(e),!0),GY.Reporter.payError({cgi:retObj.ENTRY_URL,data:reqPar||"",return:t})}catch(e){}}else if(CONST_MSG["err_"+t.ret]&&!isNaN(CONST_MSG["err_"+t.ret].code))_payCallback(CONST_MSG["err_"+t.ret]);else{var a={};a.code=t.ret,a.msg=CONST_MSG.thr_ret.msg+"("+t.ret+")",a.sourceMsg=t.msg,_payCallback(a)}},error:function(t){retObj.reqErrorRetry?++currRetryTime<MAX_RETRY_TIME?setTimeout((function(){_mPay(e)}),1e3):(currRetryTime=0,_payCallback(CONST_MSG.busy)):_payCallback(CONST_MSG.busy)},fail:function(e){_payCallback(CONST_MSG.busy)},timeout:6e3})}function _ckPassWd(e){var t=retObj.CKPWD_URL+"?"+Util.object.toStr(e);Sys.ajax({url:t,dataType:"json",success:function(t){if(t.info=t.data,t.ret=t.code,0==t.ret&&t.info)if(t.status&&0!=t.status)_payCallback(CONST_MSG.close_month);else{var n=t.info;wx.invoke("verifyWCPayPassword",{appId:n.appId,timeStamp:n.timeStamp,nonceStr:n.nonceStr,package:n.package,signType:n.signType,paySign:n.paySign},(function(t){if("verifyWCPayPassword:ok"==t.err_msg){e.type="verify",e.trans_id=n.transaction_id,e.check_token=t.token;try{e.packageinfo=encodeURIComponent(n.package)}catch(e){}return retObj.isWaitPay=0,void setTimeout((function(){_mPay(e)}),1200)}return"verifyWCPayPassword:fail"==t.err_msg?(_payCallback(CONST_MSG.cancel),void(GY.is_fun(retObj.cancelCallback)&&retObj.cancelCallback(t))):void _payCallback(CONST_MSG.cancel)}))}else if(t.ret==CONST_MSG.exe_status.code)_payCallback(CONST_MSG.exe_status);else if(t.ret==CONST_MSG.end_status.code)_payCallback(CONST_MSG.end_status);else{var r={};r.code=t.ret,r.msg=CONST_MSG.thr_ret.msg+"("+t.ret+")",_payCallback(r);try{Sys.rpt.gyErr({t:"获取验密token 失败",ret:t.ret||t.ret||-1,req:e||"",res:t}),Sys.rpt.info("url:获取验密token 失败; par:"+Util.object.toStr(e)+";ret:"+Util.object.toStr(t.data),!0),GY.Reporter.payError({cgi:retObj.CKPWD_URL,data:opar,return:t})}catch(e){}}},error:function(e){_payCallback(CONST_MSG.busy)},fail:function(e){_payCallback(CONST_MSG.busy)},timeout:8e3})}function _checkPar(e){var t=!0;if(reqPar=e,(!e.money||e.money<=0)&&(CONST_MSG.par.field="money",t=!1),(!e.actid||e.actid<=0)&&(CONST_MSG.par.field="actid",t=!1),e.oid)return!!t||(_payCallback(CONST_MSG.par),!1);Busi.authorize.auth({snspai:"snsapi_base",callback:function(){retObj.isWaitPay=0,GY.user.uid&&(e.oid=GY.user.uid),_submit(e)}})}function _payCallback(e){retObj.isWaitPay=0,reqPar&&(reqPar.tradeno=retObj.trade_no);try{reqPar.openid="1",sessionStorage.setItem(appPrkey,Util.object.toString(reqPar)),sessionStorage.setItem(appPrkey+retObj.trade_no,Util.object.toString(reqPar))}catch(e){}var t=!1;if((parseInt(e.code)<=1||parseInt(e.ret)<=1)&&(t=!0),e.isAlert&&alert(e.msg),e.code==CONST_MSG.cancel.code&&GY.is_fun(retObj.cancel))retObj.cancel(e);else if(t&&GY.is_fun(retObj.success)){sessionStorage.setItem("tradeInfoCache",Util.object.toString(e)),retObj.success(e);try{var n=location.href;0==["/m/weixin/detail.htm","/m/weixin/yqj_create.html","/m/weixin/detail_yqj.html","/m/weixin/planPick.html","/m/weixin/yxj_open.html","/m/weixin/singlePlan.html"].filter((function(e){return n.indexOf(e)>-1})).length&&GY.AmsReport&&GY.AmsReport.pay(reqPar.money)}catch(e){console.error(e)}}else!t&&GY.is_fun(retObj.fail)?retObj.fail(e):GY.is_fun(retObj.payCallback)&&retObj.payCallback(e);try{parseInt(e.code)<=1||parseInt(e.ret)<=1||(Sys.rpt.gyErr({t:"支付错误 wx",code:e.ret||e.code||-1,req:reqPar||"",res:e}),GY.Reporter.payError({cgi:retObj.ENTRY_URL,data:reqPar||"",return:{code:e.code||e.ret,msg:e.sourceMsg||e.msg}}))}catch(e){}}function _qryTradeInfo(oPar){if(oPar.transcode){var transcode=oPar.transcode,testName="",par={cache:!0,test:!1,expire:!1,debug:!1};if($.extend(par,oPar),sessionStorage.getItem(appPrkey)&&par.cache){var tradeInfo=eval("("+sessionStorage.getItem(appPrkey)+")");if(sessionStorage.removeItem(appPrkey),transcode==tradeInfo.transcode)return void("function"==typeof par.success&&par.success(tradeInfo))}par.test&&(testName="");var trade_url=__CONF__.cgiUrl1+"/cgi-bin/"+testName+"1799_query_order";if(par.expire)trade_url=__CONF__.cgiUrl1+"/cgi-bin/"+testName+"gywwe_GetTransData.fcgi";else{var trans_year=transcode.substring(10,14),trans_month=transcode.substring(14,16),trans_day=transcode.substring(16,18),trans_time=trans_year+"/"+trans_month+"/"+trans_day+" 00:00:00",_now=Date.parse(new Date);par.time&&(parseInt(par.time)!=par.time?_now=Date.parse(new Date(par.time.replace(/-/g,"/"))):(_now=par.time,par.time.toString().length<13&&(_now=1e3*par.time)));var _days=(_now-Date.parse(trans_time))/864e5;_days>7&&(trade_url=__CONF__.cgiUrl1+"/cgi-bin/gywwe_GetTransData.fcgi")}var _par={transcode:transcode,type:par.ptype||"",hk:Busi.authorize.encodeToken(GY.user.uid+transcode),uid:GY.user.uid};Sys.ajax({url:trade_url,data:_par,success:function(e){if(0==e.code){if(e.data=e.data?e.data:e.info,"function"==typeof par.success){var t=!0;"wx"==GY.browser.client&&e.data.openid!=GY.user.uid&&(t=!1),"wx"!=GY.browser.client&&e.data.uin!=GY.user.uid&&(t=!1),e.data.is_owner=t,e.data.op_time=e.op_time||e.time,par.success(e.data)}}else Busi.authorize.ckLogin({code:e.code})&&"function"==typeof par.fail&&par.fail(e)},error:function(e){"function"==typeof par.error&&par.error(e)}})}else GY.wd.dialog.dialog({msg:"不存在该订单号"})}function _checkTrade(e){_checkTimes++;var t=retObj.trade_no||Util.getStorage("transcode"+_config.appid);if(reportRelation(),!retObj.isCkOrd){if(_interval&&(clearInterval(_interval),_checkTimes>1))return;if(isCkOrdFlg)return;return isCkOrdFlg=!0,void _toResult({ret:1,info:{openid:GY.user.uid,transcode:t,gt:reqPar.gt,id:reqPar.actid,money:reqPar.money,et:reqPar.entry_type,nickname:GY.user.nick}})}var n={transcode:t,uid:GY.user.uid,hk:GY.Busi.authorize.encodeToken(GY.user.uid+t)},r=retObj.QRY_ORDER_URL+"?"+Util.object.toStr(n);GY.Sys.ajax({dataType:"json",url:r,success:function(t){t&&0==t.code&&t.data&&(t.ret=1,t.info=t.data),t&&1==t.ret?(!e&&_interval&&clearInterval(_interval),_toResult(t)):(e||_checkTimes>=retObj.maxCheckTimes)&&(GY.is_fun(retObj.iosUnPayCallback)&&retObj.iosUnPayCallback()||window.confirm("正在确认捐赠结果，请以捐赠记录为准")?location.href="/user_center/":_payCallback(CONST_MSG.cancel))}})}function checkSign(e){if("no"==GY.Busi.config.get("configFlag")){var t="/cgi-bin/WXCardSign?appid="+GY.Busi.config.get("appid")+"&oid=config&url="+encodeURIComponent(location.href.split("#")[0]);GY.Sys.ajax({url:t,dataType:"json",success:function(t){if(0==t.ret){GY.Busi.config.set("configFlag","yes");var n=t.info.sha_info;n.jsApiList=GY.Busi.config.get("jsApiList"),wx.config(n),wx.ready((function(){e()}))}}})}else e()}function compatibleOrderData(e,t){var n=$.extend({},e.order);return n.id=e.proj_info&&e.proj_info.id,n.transcode=t,n.proj=e.proj_info,n}function _toResult(e,t){t&&(e.safari=!0),(e.ret||0==e.ret)&&(e.code=e.ret)||$.extend(e,CONST_MSG.sysErr),1==e.ret&&(e.code=0),_payCallback(e)}function reportRelation(){try{Busi.relation.report({itype:"donate"})}catch(e){console.log(e)}}retObj={ENTRY_URL:defEntryUrl,ENTRY_YQJ_URL:"/cgi-bin/gywp_WXUnifiedDonateEntryYQJ",QRY_ORDER_URL:"/cgi-bin/1799_query_order",QRY_ORDER_URL_V2:"/cgi-bin/gywcom_1999_thanks_donate",CKPWD_URL:"/cgi-bin/WXGetPayTokenV2",QRY_ORDER_OPAR:"",trade_no:"",isWaitPay:0,errMsg:"",checkTimes:0,maxCheckTimes:3,domain:"",area:"cn",isCkOrd:!0,paySubmit:_submit,qryTradeInfo:_qryTradeInfo,gyCheckTradeNo:_checkTrade,toResult:_toResult,reqErrorRetry:!0,set:_set,__init:init},GY.extend(nameSpace,retObj)}("Busi.pay",Zepto),function(e,t){var n=require("Util"),r=require("Busi"),i={appid:r.config.get().appid,imgUrl:"",img_width:"120",img_height:"120",link:n.uri.getOriginHref(),desc:"",title:"",type:"link",dataUrl:""},o=function(e){r.js_conf.checkConfigFlag((function(){o(e)}))&&wx.ready((function(){if(wx.showOptionMenu(),e){for(var t=new Array,n=0;n<e.length;n++){var r="menuItem:"+e[n];t.push(r)}wx.hideMenuItems({menuList:t,success:function(e){},cancel:function(e){}})}else wx.hideMenuItems({menuList:["menuItem:readMode","menuItem:share:appMessage","menuItem:share:timeline","menuItem:share:qq","menuItem:share:weiboApp","menuItem:share:facebook","menuItem:share:QZone","menuItem:copyUrl","menuItem:share:email","menuItem:openWithSafari","menuItem:openWithQQBrowser"],success:function(e){},cancel:function(e){}})}))};function a(e){e&&t.extend(i,e),e&&e.img_url&&(i.imgUrl=e.img_url)}var c=function(e,n){r.js_conf.checkConfigFlag((function(){c(e,n)}))&&(wx.showOptionMenu(),a(e),i.link=r.relation.getUrl(i.link),wx.ready((function(){wx.onMenuShareAppMessage(i),wx.onMenuShareQQ(i),wx.onMenuShareWeibo(i),wx.onMenuShareQZone(i);var e={};t.extend(e,i,{title:i.tdesc}),wx.onMenuShareTimeline(e),"function"==typeof n&&n(wx)})))};GY.extend("Busi.sns",{init:a,hideShare:o,share:c})}(0,Zepto),function(e,t){var n,r,o,a,c=require("Busi"),s=require("Util"),u=function(e){if(c.js_conf.checkConfigFlag((function(){u(e)}))){var n={urls:[],imgUrl:""};if(e&&t.extend(n,e),n.urls.length>=1)for(k in n.urls)"//"==n.urls[k].substr(0,2)&&(n.urls[k]=document.location.protocol+n.urls[k]);wx.previewImage({current:n.imgUrl,urls:n.urls})}},l=function(e){if(c.js_conf.checkConfigFlag((function(){l(e)}))){var i={count:1,sizeType:["original","compressed"],sourceType:["album","camera"],callback:""};t.extend(i,e),wx.ready((function(){wx.chooseImage({count:i.count,sizeType:i.sizeType,sourceType:i.sourceType,success:function(e){e.localIds.length>i.count?alert("最多上传"+i.count+"张图片！"):(n=e.localIds,r=new Array,"function"==typeof i.callback&&i.callback(e))},fail:function(e){alert(s.object.toString(e))}})}))}},f=function(e){if(c.js_conf.checkConfigFlag((function(){f(e)}))){var s=0,u={isShowProgressTips:1,callback_status:0,callback:""};t.extend(u,e),wx.ready((function(){if(n.length>0){var e={localId:n[s],isShowProgressTips:u.isShowProgressTips,success:function(t){var i=function(i){o=i,a=t.serverId,r.push(t.serverId),0!=u.callback_status&&"function"==typeof u.callback&&u.callback(),s+=1,e.localId=n[s],s<n.length?wx.uploadImage(e):0==u.callback_status&&"function"==typeof u.callback&&u.callback()};"ios"==GY.browser.platform?p(n[s],(function(e){i(e)})):i(n[s])},fail:function(t){alert("图片上传失败！"),s+=1,e.localId=n[s],i<n.length&&wx.uploadImage(e)}};wx.uploadImage(e)}else alert("请先选择图片！")}))}},p=function(e,t){c.js_conf.checkConfigFlag((function(){p(e,t)}))&&wx.getLocalImgData({localId:e,success:function(e){"function"==typeof t&&t(e.localData)}})};GY.extend("Busi.img",{imagePreview:u,imageChoose:l,imageUpload:f,returnIds:function(e){switch(e){case"server":return r;case"local":return n;case"uploadServer":return a;case"uploadLocal":return o;default:return r}}})}(0,Zepto),function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(window,(function(){return n={},e.m=t={bVOz:function(e,t,n){"use strict";function r(){return!window&&"function"==typeof getApp}function i(e){var t,n;r()?(n=e,wx.request({url:n})):(t=e,setTimeout((function(){(new Image).src=t}),0))}function o(){var e=s();return e.pid||e.id||""}function a(e){var t=s(),n=e.page||c(),r=e.pid||o(),i=e.et||t.et;return{page:n,query:encodeURIComponent(location.search.replace("?","")+location.hash),version:e.version||"",event:e.event||"no-set",name:e.name||"",value:e.value||"",openid:GY.user.uid||"",pid:r,type:"",et:i}}function c(){if(r()){var e=getCurrentPages();return e[e.length-1].route}return location.pathname}function s(e){if(r()){var t=getCurrentPages();return e?t[t.length-1].options[e]:t[t.length-1]}var n=function(e,t){var n,r,i,o={};i=(n=(e=e.replace(/\?/g,"&")).split("&")).length;for(var a=0;a<i;++a)n[a].indexOf("=")<0||(o[(r=n[a].split("="))[0]]=r[1]);return o}(location.search.substr(1));return e?n[e]||"":n}function u(e){var t=s(),n="";try{n=GY.Busi.config.get("appid")}catch(e){n=""}var r={adtag:t.ADTAG||t.adtag||"",appid:n,et:e.et||t.et,event:e.event,evt_value:e.name,openid:e.openid,page:e.page,pid:e.pid,relays:0,version:e.version},o=Math.floor(Date.now()/1e3),a=function(e,t){var n=[];return Object.keys(e).sort((function(e,t){return t<e?1:-1})).forEach((function(t){n.push(e[t])})),n.push(t),function(e,t){if(t&&!isNaN(t)||(t=3308),!e)return!1;for(var n=0,r=e.length;n<r;++n)t+=(t<<5)+e.charAt(n).charCodeAt();return 2147483647&t}(n.join(""))}(r,o);r.hk=a,r._ct=o,r.ext_data=e.value,r.query_par=e.query||"",i("".concat("https://monitor.gongyi.qq.com/cgi-bin/gywhd_PvMonitor","?").concat(function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&void 0!==e[n]&&(t+="".concat(n,"=").concat(e[n],"&"));return t.slice(0,t.length-1)}(r)))}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"a",(function(){return d}));var d=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.openid=t.openid,this.mtaConfig=t.mtaConfig}var t,n;return t=e,(n=[{key:"init",value:function(e){this.openid=e.openid,this.mtaConfig=e.mtaConfig}},{key:"info",value:function(e){u(a(e)),e.useMta||e.useBadjs}},{key:"debug",value:function(e){u(a(e))}},{key:"error",value:function(e){u(a(e))}},{key:"pv",value:function(){u(a((this,{page:c(),event:"pv",openid:this.openid,pid:o()})))}},{key:"click",value:function(e){this.info(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({event:"click"},e))}},{key:"payError",value:function(e){var t="".concat(e.cgi,"$").concat(JSON.stringify(e.data),"~").concat(JSON.stringify(e.return)),n={event:"log",value:t};"3011"==e.return.code?n.name="pay_cc_err":"110063"==e.return.code?n.name="pay_max_err":"6"==e.return.code?n.name="pay_err_6":"8"==e.return.code?n.name="pay_err_8":"999"==e.return.code?n.name="pay_err_999":"-1"==e.return.code?n.name="pay_err_other":"3016"==e.return.code?n.name="pay_req_err":"3017"==e.return.code?n.name="pay_params_err":n.name="pay_err",n.value=t,u(a(n))}},{key:"interfaceError",value:function(e){var t,n,r="busi_error";console.log(e);try{r=-1<(n=e).cgi.indexOf("WXCardSign")?"sg_err":-1<n.cgi.indexOf("WXGyLogin")||-1<n.cgi.indexOf("gywp_WXGetOIDInfo_eth1")?"lg_login":n.return.code&&(0!=n.return.code||1!=n.return.code)||n.return.ret&&(0!=n.return.ret||1!=n.return.ret)?"req_busi_err":!n.httpInfo||200==n.httpInfo.code||n.return.msg&&"timeout"==n.return.msg?"req_fail":"req_http_err"}catch(e){console.log("reporter parse error:",e)}t="".concat(encodeURIComponent(e.cgi),"$").concat(JSON.stringify(e.data||""),"~").concat(JSON.stringify(e.return));var i={event:"log",name:"busi_error",useBadjs:!0};i.name=r,i.value=t,u(a(i))}},{key:"jsError",value:function(e){var t={event:"js_error",name:"js_error"};t.value=e,u(a(t))}},{key:"loginError",value:function(e){var t={event:"log"};"110033"==e.return.code||"110063"==e.return.code?t.name="lg_op_limit":"get uin from cookie is error"==e.result.msg?t.name="lg_e_cookie":t.name="lg_ck_login",t.value="".concat(encodeURIComponent(e.cgi),"~").concat(encodeURIComponent(JSON.stringify(e.return))),u(a(t))}},{key:"loginInterfaceError",value:function(e){var t={event:"log"};-1<e.error.errMsg.indexOf("request:fail")?t.name="lg_ck_login":t.name="lg_login",t.value="".concat(encodeURIComponent(e.url.split("?")[0]),"$").concat(JSON.stringify(e.data)||"","~").concat(JSON.stringify(e.error)),u(a(t))}}])&&p(t.prototype,n),e}()},zbUE:function(e,t,n){"use strict";n.r(t);var r=n("bVOz");if(void 0!==GY){GY.Reporter=new r.a({openid:GY.user.uid,mtaConfig:null});try{setTimeout((function(){-1==location.pathname.indexOf("m/weixin/yqj.html")&&GY.Reporter.pv()}),300),setTimeout((function(){console.log("report:",GY.user.linkid);var e=GY.Util.uri.getUriPar("parent1")||"";GY.user.linkid&&e&&GY.Busi.relation.report({itype:"pv"})}),1e3)}catch(e){}}}},e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)e.d(r,i,function(e){return t[e]}.bind(null,i));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e.p="/",e(e.s="zbUE");function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var t,n}));